{"ast":null,"code":"import _regeneratorRuntime from \"/Users/aribraun/Desktop/db-import/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";\nimport _asyncToGenerator from \"/Users/aribraun/Desktop/db-import/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";\nimport { Sequelize, Model, DataTypes } from 'sequelize';\nvar PORT = 'http://localhost:3000';\n\n// connects to DB, creates test model, attempts to sync it. \n// Prints whether or not succeeded\nfunction createTableOther() {\n  return _createTableOther.apply(this, arguments);\n}\nfunction _createTableOther() {\n  _createTableOther = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee() {\n    var sequelize, newTable;\n    return _regeneratorRuntime().wrap(function _callee$(_context) {\n      while (1) switch (_context.prev = _context.next) {\n        case 0:\n          /*const sequelize = new Sequelize('TempTables', 'abraun', 'j43H^zcf$4d1AS8&', {\n              host: '174.143.110.218',\n              dialect: 'mssql', \n              dialectModule: 'tedious', \n              encrypt: true,\n              dialectOptions: {\n                  requestTimeout: 5000 // timeout = 30 seconds\n              },\n              pool: {\n                  max: 2,\n                  min: 0,\n                  idle: 10000\n              }\n          });*/\n          sequelize = new Sequelize({\n            dialect: 'sqlite',\n            storage: './reg.sqlite'\n          });\n          _context.prev = 1;\n          _context.next = 4;\n          return sequelize.authenticate();\n        case 4:\n          console.log(\"connected successfully\");\n          _context.next = 10;\n          break;\n        case 7:\n          _context.prev = 7;\n          _context.t0 = _context[\"catch\"](1);\n          console.log(\"didn't connect successfully: \", _context.t0);\n        case 10:\n          //AriTestTable as a model\n          newTable = sequelize.define('AriTestTable', {\n            firstField: {\n              type: DataTypes.INTEGER,\n              primaryKey: true\n            },\n            secondField: {\n              type: DataTypes.STRING\n            }\n          }); // Adds the model as table to the database\n          _context.prev = 11;\n          _context.next = 14;\n          return newTable.sync({\n            force: true\n          });\n        case 14:\n          console.log(\"test table synced successfully\");\n          _context.next = 20;\n          break;\n        case 17:\n          _context.prev = 17;\n          _context.t1 = _context[\"catch\"](11);\n          console.error(\"Problem syncing test table: \", _context.t1);\n        case 20:\n        case \"end\":\n          return _context.stop();\n      }\n    }, _callee, null, [[1, 7], [11, 17]]);\n  }));\n  return _createTableOther.apply(this, arguments);\n}\nfunction createTable() {\n  var Connection = require('tedious').Connection;\n  var config = {\n    server: \"174.143.110.218\",\n    // or \"localhost\"\n    options: {},\n    authentication: {\n      type: \"default\",\n      options: {\n        userName: \"abraun\",\n        password: \"j43H^zcf$4d1AS8\"\n      }\n    }\n  };\n  var connection = new Connection(config);\n\n  // Setup event handler when the connection is established. \n  connection.on('connect', function (err) {\n    if (err) {\n      console.log('Error: ', err);\n    }\n    // If no error, then good to go...\n  });\n\n  // Initialize the connection.\n  connection.connect();\n}\nfunction basicGet(_x, _x2) {\n  return _basicGet.apply(this, arguments);\n}\nfunction _basicGet() {\n  _basicGet = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee2(link, DBName) {\n    var url, res, text;\n    return _regeneratorRuntime().wrap(function _callee2$(_context2) {\n      while (1) switch (_context2.prev = _context2.next) {\n        case 0:\n          url = new URL(link);\n          _context2.next = 3;\n          return fetch(PORT, {\n            method: 'POST',\n            headers: {\n              'Content-Type': 'application/json'\n            },\n            body: JSON.stringify({\n              link: url,\n              DBName: DBName\n            })\n          });\n        case 3:\n          res = _context2.sent;\n          _context2.next = 6;\n          return res.json();\n        case 6:\n          text = _context2.sent;\n          console.log(text);\n          console.log('word');\n        case 9:\n        case \"end\":\n          return _context2.stop();\n      }\n    }, _callee2);\n  }));\n  return _basicGet.apply(this, arguments);\n}\nfunction basicSocket(_x3, _x4) {\n  return _basicSocket.apply(this, arguments);\n}\nfunction _basicSocket() {\n  _basicSocket = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee3(link, DBName) {\n    var socket;\n    return _regeneratorRuntime().wrap(function _callee3$(_context3) {\n      while (1) switch (_context3.prev = _context3.next) {\n        case 0:\n          socket = new WebSocket(PORT);\n          socket.onopen = function () {\n            console.log('WebSocket connection established');\n            var payload = {\n              link: link,\n              DBName: DBName\n            };\n            socket.send(JSON.stringify(payload));\n          };\n          socket.onmessage = function (event) {\n            var text = JSON.parse(event.data);\n            console.log(text);\n            console.log('word');\n          };\n          socket.onclose = function () {\n            console.log('WebSocket connection closed');\n          };\n        case 4:\n        case \"end\":\n          return _context3.stop();\n      }\n    }, _callee3);\n  }));\n  return _basicSocket.apply(this, arguments);\n}\nexport { createTable, basicGet, basicSocket };","map":{"version":3,"names":["Sequelize","Model","DataTypes","PORT","createTableOther","_createTableOther","apply","arguments","_asyncToGenerator","_regeneratorRuntime","mark","_callee","sequelize","newTable","wrap","_callee$","_context","prev","next","dialect","storage","authenticate","console","log","t0","define","firstField","type","INTEGER","primaryKey","secondField","STRING","sync","force","t1","error","stop","createTable","Connection","require","config","server","options","authentication","userName","password","connection","on","err","connect","basicGet","_x","_x2","_basicGet","_callee2","link","DBName","url","res","text","_callee2$","_context2","URL","fetch","method","headers","body","JSON","stringify","sent","json","basicSocket","_x3","_x4","_basicSocket","_callee3","socket","_callee3$","_context3","WebSocket","onopen","payload","send","onmessage","event","parse","data","onclose"],"sources":["/Users/aribraun/Desktop/db-import/src/backend.js"],"sourcesContent":["\nimport { Sequelize, Model, DataTypes } from 'sequelize';\n\nconst PORT = 'http://localhost:3000'\n\n// connects to DB, creates test model, attempts to sync it. \n// Prints whether or not succeeded\nasync function createTableOther(){\n    /*const sequelize = new Sequelize('TempTables', 'abraun', 'j43H^zcf$4d1AS8&', {\n        host: '174.143.110.218',\n        dialect: 'mssql', \n        dialectModule: 'tedious', \n        encrypt: true,\n        dialectOptions: {\n            requestTimeout: 5000 // timeout = 30 seconds\n        },\n        pool: {\n            max: 2,\n            min: 0,\n            idle: 10000\n        }\n    });*/\n    const sequelize = new Sequelize({dialect: 'sqlite', storage: './reg.sqlite'});\n\n    try{\n        await sequelize.authenticate();\n        console.log(\"connected successfully\");\n    }catch(error){\n        console.log(\"didn't connect successfully: \", error)\n    }\n\n    //AriTestTable as a model\n    const newTable = sequelize.define('AriTestTable', {\n        firstField:{\n            type: DataTypes.INTEGER,\n            primaryKey: true,\n        },\n        secondField:{\n            type: DataTypes.STRING,\n        }\n    });\n\n    // Adds the model as table to the database\n    try {\n        await newTable.sync({force: true});\n        console.log(\"test table synced successfully\")\n    }catch(error){\n        console.error(\"Problem syncing test table: \", error);\n    }\n}\n\nfunction createTable(){\n    var Connection = require('tedious').Connection;\n    \n    var config = {\n        server: \"174.143.110.218\", // or \"localhost\"\n        options: {},\n        authentication: {\n          type: \"default\",\n          options: {  \n            userName: \"abraun\",\n            password: \"j43H^zcf$4d1AS8\",\n          }\n        }\n    };\n\n    var connection = new Connection(config);\n\n    // Setup event handler when the connection is established. \n    connection.on('connect', function(err) {\n    if(err) {\n        console.log('Error: ', err)\n    }\n    // If no error, then good to go...\n    \n    });\n\n    // Initialize the connection.\n    connection.connect();\n}\n\n\nasync function basicGet(link, DBName){\n    const url = new URL(link);\n    const res = await fetch(PORT, {\n        method: 'POST',\n        headers: {\n            'Content-Type': 'application/json',\n          },\n        body: JSON.stringify({link: url, DBName: DBName})\n    }\n    );\n    const text = await res.json();\n    console.log(text);\n    console.log('word');\n}\n\nasync function basicSocket(link, DBName){\n    const socket = new WebSocket(PORT);\n\n    socket.onopen = () => {\n        console.log('WebSocket connection established');\n\n        const payload = { link, DBName};\n\n        socket.send(JSON.stringify(payload));\n    };\n\n    socket.onmessage = (event) => {\n        const text = JSON.parse(event.data);\n        console.log(text);\n        console.log('word');\n    };\n\n    socket.onclose = () => {\n        console.log('WebSocket connection closed');\n    };\n}\n\n\nexport {\n    createTable, \n    basicGet,\n    basicSocket\n};\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}