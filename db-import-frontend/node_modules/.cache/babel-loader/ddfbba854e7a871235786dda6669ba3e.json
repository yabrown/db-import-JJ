{"ast":null,"code":"var cache = new Map();\nvar fs = require('fs');\nvar _require = require('path'),\n  dirname = _require.dirname,\n  resolve = _require.resolve;\nvar lstat = function lstat(path) {\n  return new Promise(function (res, rej) {\n    return fs.lstat(path, function (er, st) {\n      return er ? rej(er) : res(st);\n    });\n  });\n};\nvar inferOwner = function inferOwner(path) {\n  path = resolve(path);\n  if (cache.has(path)) return Promise.resolve(cache.get(path));\n  var statThen = function statThen(st) {\n    var uid = st.uid,\n      gid = st.gid;\n    cache.set(path, {\n      uid: uid,\n      gid: gid\n    });\n    return {\n      uid: uid,\n      gid: gid\n    };\n  };\n  var parent = dirname(path);\n  var parentTrap = parent === path ? null : function (er) {\n    return inferOwner(parent).then(function (owner) {\n      cache.set(path, owner);\n      return owner;\n    });\n  };\n  return lstat(path).then(statThen, parentTrap);\n};\nvar inferOwnerSync = function inferOwnerSync(path) {\n  path = resolve(path);\n  if (cache.has(path)) return cache.get(path);\n  var parent = dirname(path);\n\n  // avoid obscuring call site by re-throwing\n  // \"catch\" the error by returning from a finally,\n  // only if we're not at the root, and the parent call works.\n  var threw = true;\n  try {\n    var st = fs.lstatSync(path);\n    threw = false;\n    var uid = st.uid,\n      gid = st.gid;\n    cache.set(path, {\n      uid: uid,\n      gid: gid\n    });\n    return {\n      uid: uid,\n      gid: gid\n    };\n  } finally {\n    if (threw && parent !== path) {\n      var owner = inferOwnerSync(parent);\n      cache.set(path, owner);\n      return owner; // eslint-disable-line no-unsafe-finally\n    }\n  }\n};\n\nvar inflight = new Map();\nmodule.exports = function (path) {\n  path = resolve(path);\n  if (inflight.has(path)) return Promise.resolve(inflight.get(path));\n  var p = inferOwner(path).then(function (owner) {\n    inflight.delete(path);\n    return owner;\n  });\n  inflight.set(path, p);\n  return p;\n};\nmodule.exports.sync = inferOwnerSync;\nmodule.exports.clearCache = function () {\n  cache.clear();\n  inflight.clear();\n};","map":{"version":3,"names":["cache","Map","fs","require","_require","dirname","resolve","lstat","path","Promise","res","rej","er","st","inferOwner","has","get","statThen","uid","gid","set","parent","parentTrap","then","owner","inferOwnerSync","threw","lstatSync","inflight","module","exports","p","delete","sync","clearCache","clear"],"sources":["/Users/aribraun/Desktop/db-import/node_modules/infer-owner/index.js"],"sourcesContent":["const cache = new Map()\nconst fs = require('fs')\nconst { dirname, resolve } = require('path')\n\n\nconst lstat = path => new Promise((res, rej) =>\n  fs.lstat(path, (er, st) => er ? rej(er) : res(st)))\n\nconst inferOwner = path => {\n  path = resolve(path)\n  if (cache.has(path))\n    return Promise.resolve(cache.get(path))\n\n  const statThen = st => {\n    const { uid, gid } = st\n    cache.set(path, { uid, gid })\n    return { uid, gid }\n  }\n  const parent = dirname(path)\n  const parentTrap = parent === path ? null : er => {\n    return inferOwner(parent).then((owner) => {\n      cache.set(path, owner)\n      return owner\n    })\n  }\n  return lstat(path).then(statThen, parentTrap)\n}\n\nconst inferOwnerSync = path => {\n  path = resolve(path)\n  if (cache.has(path))\n    return cache.get(path)\n\n  const parent = dirname(path)\n\n  // avoid obscuring call site by re-throwing\n  // \"catch\" the error by returning from a finally,\n  // only if we're not at the root, and the parent call works.\n  let threw = true\n  try {\n    const st = fs.lstatSync(path)\n    threw = false\n    const { uid, gid } = st\n    cache.set(path, { uid, gid })\n    return { uid, gid }\n  } finally {\n    if (threw && parent !== path) {\n      const owner = inferOwnerSync(parent)\n      cache.set(path, owner)\n      return owner // eslint-disable-line no-unsafe-finally\n    }\n  }\n}\n\nconst inflight = new Map()\nmodule.exports = path => {\n  path = resolve(path)\n  if (inflight.has(path))\n    return Promise.resolve(inflight.get(path))\n  const p = inferOwner(path).then(owner => {\n    inflight.delete(path)\n    return owner\n  })\n  inflight.set(path, p)\n  return p\n}\nmodule.exports.sync = inferOwnerSync\nmodule.exports.clearCache = () => {\n  cache.clear()\n  inflight.clear()\n}\n"],"mappings":"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"},"metadata":{},"sourceType":"script"}