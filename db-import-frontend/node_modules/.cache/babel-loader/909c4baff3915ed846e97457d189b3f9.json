{"ast":null,"code":"'use strict';\n\n// tar -c\nvar hlo = require('./high-level-opt.js');\nvar Pack = require('./pack.js');\nvar fsm = require('fs-minipass');\nvar t = require('./list.js');\nvar path = require('path');\nmodule.exports = function (opt_, files, cb) {\n  if (typeof files === 'function') {\n    cb = files;\n  }\n  if (Array.isArray(opt_)) {\n    files = opt_, opt_ = {};\n  }\n  if (!files || !Array.isArray(files) || !files.length) {\n    throw new TypeError('no files or directories specified');\n  }\n  files = Array.from(files);\n  var opt = hlo(opt_);\n  if (opt.sync && typeof cb === 'function') {\n    throw new TypeError('callback not supported for sync tar functions');\n  }\n  if (!opt.file && typeof cb === 'function') {\n    throw new TypeError('callback only supported with file option');\n  }\n  return opt.file && opt.sync ? createFileSync(opt, files) : opt.file ? createFile(opt, files, cb) : opt.sync ? createSync(opt, files) : create(opt, files);\n};\nvar createFileSync = function createFileSync(opt, files) {\n  var p = new Pack.Sync(opt);\n  var stream = new fsm.WriteStreamSync(opt.file, {\n    mode: opt.mode || 438\n  });\n  p.pipe(stream);\n  addFilesSync(p, files);\n};\nvar createFile = function createFile(opt, files, cb) {\n  var p = new Pack(opt);\n  var stream = new fsm.WriteStream(opt.file, {\n    mode: opt.mode || 438\n  });\n  p.pipe(stream);\n  var promise = new Promise(function (res, rej) {\n    stream.on('error', rej);\n    stream.on('close', res);\n    p.on('error', rej);\n  });\n  addFilesAsync(p, files);\n  return cb ? promise.then(cb, cb) : promise;\n};\nvar addFilesSync = function addFilesSync(p, files) {\n  files.forEach(function (file) {\n    if (file.charAt(0) === '@') {\n      t({\n        file: path.resolve(p.cwd, file.slice(1)),\n        sync: true,\n        noResume: true,\n        onentry: function onentry(entry) {\n          return p.add(entry);\n        }\n      });\n    } else {\n      p.add(file);\n    }\n  });\n  p.end();\n};\nvar addFilesAsync = function addFilesAsync(p, files) {\n  while (files.length) {\n    var file = files.shift();\n    if (file.charAt(0) === '@') {\n      return t({\n        file: path.resolve(p.cwd, file.slice(1)),\n        noResume: true,\n        onentry: function onentry(entry) {\n          return p.add(entry);\n        }\n      }).then(function (_) {\n        return addFilesAsync(p, files);\n      });\n    } else {\n      p.add(file);\n    }\n  }\n  p.end();\n};\nvar createSync = function createSync(opt, files) {\n  var p = new Pack.Sync(opt);\n  addFilesSync(p, files);\n  return p;\n};\nvar create = function create(opt, files) {\n  var p = new Pack(opt);\n  addFilesAsync(p, files);\n  return p;\n};","map":{"version":3,"names":["hlo","require","Pack","fsm","t","path","module","exports","opt_","files","cb","Array","isArray","length","TypeError","from","opt","sync","file","createFileSync","createFile","createSync","create","p","Sync","stream","WriteStreamSync","mode","pipe","addFilesSync","WriteStream","promise","Promise","res","rej","on","addFilesAsync","then","forEach","charAt","resolve","cwd","slice","noResume","onentry","entry","add","end","shift","_"],"sources":["/Users/aribraun/Desktop/db-import/node_modules/tar/lib/create.js"],"sourcesContent":["'use strict'\n\n// tar -c\nconst hlo = require('./high-level-opt.js')\n\nconst Pack = require('./pack.js')\nconst fsm = require('fs-minipass')\nconst t = require('./list.js')\nconst path = require('path')\n\nmodule.exports = (opt_, files, cb) => {\n  if (typeof files === 'function') {\n    cb = files\n  }\n\n  if (Array.isArray(opt_)) {\n    files = opt_, opt_ = {}\n  }\n\n  if (!files || !Array.isArray(files) || !files.length) {\n    throw new TypeError('no files or directories specified')\n  }\n\n  files = Array.from(files)\n\n  const opt = hlo(opt_)\n\n  if (opt.sync && typeof cb === 'function') {\n    throw new TypeError('callback not supported for sync tar functions')\n  }\n\n  if (!opt.file && typeof cb === 'function') {\n    throw new TypeError('callback only supported with file option')\n  }\n\n  return opt.file && opt.sync ? createFileSync(opt, files)\n    : opt.file ? createFile(opt, files, cb)\n    : opt.sync ? createSync(opt, files)\n    : create(opt, files)\n}\n\nconst createFileSync = (opt, files) => {\n  const p = new Pack.Sync(opt)\n  const stream = new fsm.WriteStreamSync(opt.file, {\n    mode: opt.mode || 0o666,\n  })\n  p.pipe(stream)\n  addFilesSync(p, files)\n}\n\nconst createFile = (opt, files, cb) => {\n  const p = new Pack(opt)\n  const stream = new fsm.WriteStream(opt.file, {\n    mode: opt.mode || 0o666,\n  })\n  p.pipe(stream)\n\n  const promise = new Promise((res, rej) => {\n    stream.on('error', rej)\n    stream.on('close', res)\n    p.on('error', rej)\n  })\n\n  addFilesAsync(p, files)\n\n  return cb ? promise.then(cb, cb) : promise\n}\n\nconst addFilesSync = (p, files) => {\n  files.forEach(file => {\n    if (file.charAt(0) === '@') {\n      t({\n        file: path.resolve(p.cwd, file.slice(1)),\n        sync: true,\n        noResume: true,\n        onentry: entry => p.add(entry),\n      })\n    } else {\n      p.add(file)\n    }\n  })\n  p.end()\n}\n\nconst addFilesAsync = (p, files) => {\n  while (files.length) {\n    const file = files.shift()\n    if (file.charAt(0) === '@') {\n      return t({\n        file: path.resolve(p.cwd, file.slice(1)),\n        noResume: true,\n        onentry: entry => p.add(entry),\n      }).then(_ => addFilesAsync(p, files))\n    } else {\n      p.add(file)\n    }\n  }\n  p.end()\n}\n\nconst createSync = (opt, files) => {\n  const p = new Pack.Sync(opt)\n  addFilesSync(p, files)\n  return p\n}\n\nconst create = (opt, files) => {\n  const p = new Pack(opt)\n  addFilesAsync(p, files)\n  return p\n}\n"],"mappings":"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"},"metadata":{},"sourceType":"script"}