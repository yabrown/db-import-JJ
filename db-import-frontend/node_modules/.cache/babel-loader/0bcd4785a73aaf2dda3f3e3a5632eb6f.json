{"ast":null,"code":"import _createClass from \"/Users/aribraun/Desktop/db-import/db-import-frontend/node_modules/@babel/runtime/helpers/esm/createClass.js\";\nimport _classCallCheck from \"/Users/aribraun/Desktop/db-import/db-import-frontend/node_modules/@babel/runtime/helpers/esm/classCallCheck.js\";\nimport _inherits from \"/Users/aribraun/Desktop/db-import/db-import-frontend/node_modules/@babel/runtime/helpers/esm/inherits.js\";\nimport _createSuper from \"/Users/aribraun/Desktop/db-import/db-import-frontend/node_modules/@babel/runtime/helpers/esm/createSuper.js\";\nimport _wrapNativeSuper from \"/Users/aribraun/Desktop/db-import/db-import-frontend/node_modules/@babel/runtime/helpers/esm/wrapNativeSuper.js\";\n// Copyright (c) Microsoft Corporation.\n// Licensed under the MIT license.\nfunction isErrorResponse(errorResponse) {\n  return errorResponse && typeof errorResponse.error === \"string\" && typeof errorResponse.error_description === \"string\";\n}\n/**\n * The Error.name value of an CredentialUnavailable\n */\nexport var CredentialUnavailableErrorName = \"CredentialUnavailableError\";\n/**\n * This signifies that the credential that was tried in a chained credential\n * was not available to be used as the credential. Rather than treating this as\n * an error that should halt the chain, it's caught and the chain continues\n */\nexport var CredentialUnavailableError = /*#__PURE__*/function (_Error) {\n  _inherits(CredentialUnavailableError, _Error);\n  var _super = _createSuper(CredentialUnavailableError);\n  function CredentialUnavailableError(message) {\n    var _this;\n    _classCallCheck(this, CredentialUnavailableError);\n    _this = _super.call(this, message);\n    _this.name = CredentialUnavailableErrorName;\n    return _this;\n  }\n  return _createClass(CredentialUnavailableError);\n}( /*#__PURE__*/_wrapNativeSuper(Error));\n/**\n * The Error.name value of an AuthenticationError\n */\nexport var AuthenticationErrorName = \"AuthenticationError\";\n/**\n * Provides details about a failure to authenticate with Azure Active\n * Directory.  The `errorResponse` field contains more details about\n * the specific failure.\n */\nexport var AuthenticationError = /*#__PURE__*/function (_Error2) {\n  _inherits(AuthenticationError, _Error2);\n  var _super2 = _createSuper(AuthenticationError);\n  // eslint-disable-next-line @typescript-eslint/ban-types\n  function AuthenticationError(statusCode, errorBody) {\n    var _this2;\n    _classCallCheck(this, AuthenticationError);\n    var errorResponse = {\n      error: \"unknown\",\n      errorDescription: \"An unknown error occurred and no additional details are available.\"\n    };\n    if (isErrorResponse(errorBody)) {\n      errorResponse = convertOAuthErrorResponseToErrorResponse(errorBody);\n    } else if (typeof errorBody === \"string\") {\n      try {\n        // Most error responses will contain JSON-formatted error details\n        // in the response body\n        var oauthErrorResponse = JSON.parse(errorBody);\n        errorResponse = convertOAuthErrorResponseToErrorResponse(oauthErrorResponse);\n      } catch (e) {\n        if (statusCode === 400) {\n          errorResponse = {\n            error: \"authority_not_found\",\n            errorDescription: \"The specified authority URL was not found.\"\n          };\n        } else {\n          errorResponse = {\n            error: \"unknown_error\",\n            errorDescription: \"An unknown error has occurred. Response body:\\n\\n\".concat(errorBody)\n          };\n        }\n      }\n    } else {\n      errorResponse = {\n        error: \"unknown_error\",\n        errorDescription: \"An unknown error occurred and no additional details are available.\"\n      };\n    }\n    _this2 = _super2.call(this, \"\".concat(errorResponse.error, \" Status code: \").concat(statusCode, \"\\nMore details:\\n\").concat(errorResponse.errorDescription));\n    _this2.statusCode = statusCode;\n    _this2.errorResponse = errorResponse;\n    // Ensure that this type reports the correct name\n    _this2.name = AuthenticationErrorName;\n    return _this2;\n  }\n  return _createClass(AuthenticationError);\n}( /*#__PURE__*/_wrapNativeSuper(Error));\n/**\n * The Error.name value of an AggregateAuthenticationError\n */\nexport var AggregateAuthenticationErrorName = \"AggregateAuthenticationError\";\n/**\n * Provides an `errors` array containing {@link AuthenticationError} instance\n * for authentication failures from credentials in a {@link ChainedTokenCredential}.\n */\nexport var AggregateAuthenticationError = /*#__PURE__*/function (_Error3) {\n  _inherits(AggregateAuthenticationError, _Error3);\n  var _super3 = _createSuper(AggregateAuthenticationError);\n  function AggregateAuthenticationError(errors, errorMessage) {\n    var _this3;\n    _classCallCheck(this, AggregateAuthenticationError);\n    var errorDetail = errors.join(\"\\n\");\n    _this3 = _super3.call(this, \"\".concat(errorMessage, \"\\n\").concat(errorDetail));\n    _this3.errors = errors;\n    // Ensure that this type reports the correct name\n    _this3.name = AggregateAuthenticationErrorName;\n    return _this3;\n  }\n  return _createClass(AggregateAuthenticationError);\n}( /*#__PURE__*/_wrapNativeSuper(Error));\nfunction convertOAuthErrorResponseToErrorResponse(errorBody) {\n  return {\n    error: errorBody.error,\n    errorDescription: errorBody.error_description,\n    correlationId: errorBody.correlation_id,\n    errorCodes: errorBody.error_codes,\n    timestamp: errorBody.timestamp,\n    traceId: errorBody.trace_id\n  };\n}\n/**\n * Error used to enforce authentication after trying to retrieve a token silently.\n */\nexport var AuthenticationRequiredError = /*#__PURE__*/function (_Error4) {\n  _inherits(AuthenticationRequiredError, _Error4);\n  var _super4 = _createSuper(AuthenticationRequiredError);\n  function AuthenticationRequiredError(\n  /**\n   * Optional parameters. A message can be specified. The {@link GetTokenOptions} of the request can also be specified to more easily associate the error with the received parameters.\n   */\n  options) {\n    var _this4;\n    _classCallCheck(this, AuthenticationRequiredError);\n    _this4 = _super4.call(this, options.message);\n    _this4.scopes = options.scopes;\n    _this4.getTokenOptions = options.getTokenOptions;\n    _this4.name = \"AuthenticationRequiredError\";\n    return _this4;\n  }\n  return _createClass(AuthenticationRequiredError);\n}( /*#__PURE__*/_wrapNativeSuper(Error));","map":{"version":3,"names":["isErrorResponse","errorResponse","error","error_description","CredentialUnavailableErrorName","CredentialUnavailableError","_Error","_inherits","_super","_createSuper","message","_this","_classCallCheck","call","name","_createClass","_wrapNativeSuper","Error","AuthenticationErrorName","AuthenticationError","_Error2","_super2","statusCode","errorBody","_this2","errorDescription","convertOAuthErrorResponseToErrorResponse","oauthErrorResponse","JSON","parse","e","concat","AggregateAuthenticationErrorName","AggregateAuthenticationError","_Error3","_super3","errors","errorMessage","_this3","errorDetail","join","correlationId","correlation_id","errorCodes","error_codes","timestamp","traceId","trace_id","AuthenticationRequiredError","_Error4","_super4","options","_this4","scopes","getTokenOptions"],"sources":["../../src/errors.ts"],"sourcesContent":["// Copyright (c) Microsoft Corporation.\n// Licensed under the MIT license.\n\nimport { GetTokenOptions } from \"@azure/core-auth\";\n\n/**\n * See the official documentation for more details:\n *\n * https://docs.microsoft.com/en-us/azure/active-directory/develop/v1-protocols-oauth-code#error-response-1\n *\n * NOTE: This documentation is for v1 OAuth support but the same error\n * response details still apply to v2.\n */\nexport interface ErrorResponse {\n  /**\n   * The string identifier for the error.\n   */\n  error: string;\n\n  /**\n   * The error's description.\n   */\n  errorDescription: string;\n\n  /**\n   * An array of codes pertaining to the error(s) that occurred.\n   */\n  errorCodes?: number[];\n\n  /**\n   * The timestamp at which the error occurred.\n   */\n  timestamp?: string;\n\n  /**\n   * The trace identifier for this error occurrence.\n   */\n  traceId?: string;\n\n  /**\n   * The correlation ID to be used for tracking the source of the error.\n   */\n  correlationId?: string;\n}\n\n/**\n * Used for internal deserialization of OAuth responses. Public model is ErrorResponse\n * @internal\n */\nexport interface OAuthErrorResponse {\n  error: string;\n  error_description: string;\n  error_codes?: number[];\n  timestamp?: string;\n  trace_id?: string;\n  correlation_id?: string;\n}\n\nfunction isErrorResponse(errorResponse: any): errorResponse is OAuthErrorResponse {\n  return (\n    errorResponse &&\n    typeof errorResponse.error === \"string\" &&\n    typeof errorResponse.error_description === \"string\"\n  );\n}\n\n/**\n * The Error.name value of an CredentialUnavailable\n */\nexport const CredentialUnavailableErrorName = \"CredentialUnavailableError\";\n\n/**\n * This signifies that the credential that was tried in a chained credential\n * was not available to be used as the credential. Rather than treating this as\n * an error that should halt the chain, it's caught and the chain continues\n */\nexport class CredentialUnavailableError extends Error {\n  constructor(message?: string) {\n    super(message);\n    this.name = CredentialUnavailableErrorName;\n  }\n}\n\n/**\n * The Error.name value of an AuthenticationError\n */\nexport const AuthenticationErrorName = \"AuthenticationError\";\n\n/**\n * Provides details about a failure to authenticate with Azure Active\n * Directory.  The `errorResponse` field contains more details about\n * the specific failure.\n */\nexport class AuthenticationError extends Error {\n  /**\n   * The HTTP status code returned from the authentication request.\n   */\n  public readonly statusCode: number;\n\n  /**\n   * The error response details.\n   */\n  public readonly errorResponse: ErrorResponse;\n\n  // eslint-disable-next-line @typescript-eslint/ban-types\n  constructor(statusCode: number, errorBody: object | string | undefined | null) {\n    let errorResponse: ErrorResponse = {\n      error: \"unknown\",\n      errorDescription: \"An unknown error occurred and no additional details are available.\",\n    };\n\n    if (isErrorResponse(errorBody)) {\n      errorResponse = convertOAuthErrorResponseToErrorResponse(errorBody);\n    } else if (typeof errorBody === \"string\") {\n      try {\n        // Most error responses will contain JSON-formatted error details\n        // in the response body\n        const oauthErrorResponse: OAuthErrorResponse = JSON.parse(errorBody);\n        errorResponse = convertOAuthErrorResponseToErrorResponse(oauthErrorResponse);\n      } catch (e: any) {\n        if (statusCode === 400) {\n          errorResponse = {\n            error: \"authority_not_found\",\n            errorDescription: \"The specified authority URL was not found.\",\n          };\n        } else {\n          errorResponse = {\n            error: \"unknown_error\",\n            errorDescription: `An unknown error has occurred. Response body:\\n\\n${errorBody}`,\n          };\n        }\n      }\n    } else {\n      errorResponse = {\n        error: \"unknown_error\",\n        errorDescription: \"An unknown error occurred and no additional details are available.\",\n      };\n    }\n\n    super(\n      `${errorResponse.error} Status code: ${statusCode}\\nMore details:\\n${errorResponse.errorDescription}`\n    );\n    this.statusCode = statusCode;\n    this.errorResponse = errorResponse;\n\n    // Ensure that this type reports the correct name\n    this.name = AuthenticationErrorName;\n  }\n}\n\n/**\n * The Error.name value of an AggregateAuthenticationError\n */\nexport const AggregateAuthenticationErrorName = \"AggregateAuthenticationError\";\n\n/**\n * Provides an `errors` array containing {@link AuthenticationError} instance\n * for authentication failures from credentials in a {@link ChainedTokenCredential}.\n */\nexport class AggregateAuthenticationError extends Error {\n  /**\n   * The array of error objects that were thrown while trying to authenticate\n   * with the credentials in a {@link ChainedTokenCredential}.\n   */\n  public errors: any[];\n\n  constructor(errors: any[], errorMessage?: string) {\n    const errorDetail = errors.join(\"\\n\");\n    super(`${errorMessage}\\n${errorDetail}`);\n    this.errors = errors;\n\n    // Ensure that this type reports the correct name\n    this.name = AggregateAuthenticationErrorName;\n  }\n}\n\nfunction convertOAuthErrorResponseToErrorResponse(errorBody: OAuthErrorResponse): ErrorResponse {\n  return {\n    error: errorBody.error,\n    errorDescription: errorBody.error_description,\n    correlationId: errorBody.correlation_id,\n    errorCodes: errorBody.error_codes,\n    timestamp: errorBody.timestamp,\n    traceId: errorBody.trace_id,\n  };\n}\n\n/**\n * Optional parameters to the {@link AuthenticationRequiredError}\n */\nexport interface AuthenticationRequiredErrorOptions {\n  /**\n   * The list of scopes for which the token will have access.\n   */\n  scopes: string[];\n  /**\n   * The options passed to the getToken request.\n   */\n  getTokenOptions?: GetTokenOptions;\n  /**\n   * The message of the error.\n   */\n  message?: string;\n}\n\n/**\n * Error used to enforce authentication after trying to retrieve a token silently.\n */\nexport class AuthenticationRequiredError extends Error {\n  /**\n   * The list of scopes for which the token will have access.\n   */\n  public scopes: string[];\n  /**\n   * The options passed to the getToken request.\n   */\n  public getTokenOptions?: GetTokenOptions;\n\n  constructor(\n    /**\n     * Optional parameters. A message can be specified. The {@link GetTokenOptions} of the request can also be specified to more easily associate the error with the received parameters.\n     */\n    options: AuthenticationRequiredErrorOptions\n  ) {\n    super(options.message);\n    this.scopes = options.scopes;\n    this.getTokenOptions = options.getTokenOptions;\n    this.name = \"AuthenticationRequiredError\";\n  }\n}\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}