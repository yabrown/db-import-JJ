{"ast":null,"code":"'use strict';\n\nvar _classCallCheck = require(\"/Users/aribraun/Desktop/db-import/node_modules/@babel/runtime/helpers/classCallCheck.js\").default;\nvar _createClass = require(\"/Users/aribraun/Desktop/db-import/node_modules/@babel/runtime/helpers/createClass.js\").default;\nvar _inherits = require(\"/Users/aribraun/Desktop/db-import/node_modules/@babel/runtime/helpers/inherits.js\").default;\nvar _createSuper = require(\"/Users/aribraun/Desktop/db-import/node_modules/@babel/runtime/helpers/createSuper.js\").default;\nvar util = require('util');\nvar contentPath = require('./path');\nvar fixOwner = require('../util/fix-owner');\nvar fs = require('fs');\nvar moveFile = require('../util/move-file');\nvar Minipass = require('minipass');\nvar Pipeline = require('minipass-pipeline');\nvar Flush = require('minipass-flush');\nvar path = require('path');\nvar rimraf = util.promisify(require('rimraf'));\nvar ssri = require('ssri');\nvar uniqueFilename = require('unique-filename');\nvar _require = require('./../util/disposer'),\n  disposer = _require.disposer;\nvar fsm = require('fs-minipass');\nvar writeFile = util.promisify(fs.writeFile);\nmodule.exports = write;\nfunction write(cache, data) {\n  var opts = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : {};\n  var algorithms = opts.algorithms,\n    size = opts.size,\n    integrity = opts.integrity;\n  if (algorithms && algorithms.length > 1) throw new Error('opts.algorithms only supports a single algorithm for now');\n  if (typeof size === 'number' && data.length !== size) return Promise.reject(sizeError(size, data.length));\n  var sri = ssri.fromData(data, algorithms ? {\n    algorithms: algorithms\n  } : {});\n  if (integrity && !ssri.checkData(data, integrity, opts)) return Promise.reject(checksumError(integrity, sri));\n  return disposer(makeTmp(cache, opts), makeTmpDisposer, function (tmp) {\n    return writeFile(tmp.target, data, {\n      flag: 'wx'\n    }).then(function () {\n      return moveToDestination(tmp, cache, sri, opts);\n    });\n  }).then(function () {\n    return {\n      integrity: sri,\n      size: data.length\n    };\n  });\n}\nmodule.exports.stream = writeStream;\n\n// writes proxied to the 'inputStream' that is passed to the Promise\n// 'end' is deferred until content is handled.\nvar CacacheWriteStream = /*#__PURE__*/function (_Flush) {\n  _inherits(CacacheWriteStream, _Flush);\n  var _super = _createSuper(CacacheWriteStream);\n  function CacacheWriteStream(cache, opts) {\n    var _this;\n    _classCallCheck(this, CacacheWriteStream);\n    _this = _super.call(this);\n    _this.opts = opts;\n    _this.cache = cache;\n    _this.inputStream = new Minipass();\n    _this.inputStream.on('error', function (er) {\n      return _this.emit('error', er);\n    });\n    _this.inputStream.on('drain', function () {\n      return _this.emit('drain');\n    });\n    _this.handleContentP = null;\n    return _this;\n  }\n  _createClass(CacacheWriteStream, [{\n    key: \"write\",\n    value: function write(chunk, encoding, cb) {\n      if (!this.handleContentP) {\n        this.handleContentP = handleContent(this.inputStream, this.cache, this.opts);\n      }\n      return this.inputStream.write(chunk, encoding, cb);\n    }\n  }, {\n    key: \"flush\",\n    value: function flush(cb) {\n      var _this2 = this;\n      this.inputStream.end(function () {\n        if (!_this2.handleContentP) {\n          var e = new Error('Cache input stream was empty');\n          e.code = 'ENODATA';\n          // empty streams are probably emitting end right away.\n          // defer this one tick by rejecting a promise on it.\n          return Promise.reject(e).catch(cb);\n        }\n        _this2.handleContentP.then(function (res) {\n          res.integrity && _this2.emit('integrity', res.integrity);\n          res.size !== null && _this2.emit('size', res.size);\n          cb();\n        }, function (er) {\n          return cb(er);\n        });\n      });\n    }\n  }]);\n  return CacacheWriteStream;\n}(Flush);\nfunction writeStream(cache) {\n  var opts = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n  return new CacacheWriteStream(cache, opts);\n}\nfunction handleContent(inputStream, cache, opts) {\n  return disposer(makeTmp(cache, opts), makeTmpDisposer, function (tmp) {\n    return pipeToTmp(inputStream, cache, tmp.target, opts).then(function (res) {\n      return moveToDestination(tmp, cache, res.integrity, opts).then(function () {\n        return res;\n      });\n    });\n  });\n}\nfunction pipeToTmp(inputStream, cache, tmpTarget, opts) {\n  var integrity;\n  var size;\n  var hashStream = ssri.integrityStream({\n    integrity: opts.integrity,\n    algorithms: opts.algorithms,\n    size: opts.size\n  });\n  hashStream.on('integrity', function (i) {\n    integrity = i;\n  });\n  hashStream.on('size', function (s) {\n    size = s;\n  });\n  var outStream = new fsm.WriteStream(tmpTarget, {\n    flags: 'wx'\n  });\n\n  // NB: this can throw if the hashStream has a problem with\n  // it, and the data is fully written.  but pipeToTmp is only\n  // called in promisory contexts where that is handled.\n  var pipeline = new Pipeline(inputStream, hashStream, outStream);\n  return pipeline.promise().then(function () {\n    return {\n      integrity: integrity,\n      size: size\n    };\n  }).catch(function (er) {\n    return rimraf(tmpTarget).then(function () {\n      throw er;\n    });\n  });\n}\nfunction makeTmp(cache, opts) {\n  var tmpTarget = uniqueFilename(path.join(cache, 'tmp'), opts.tmpPrefix);\n  return fixOwner.mkdirfix(cache, path.dirname(tmpTarget)).then(function () {\n    return {\n      target: tmpTarget,\n      moved: false\n    };\n  });\n}\nfunction makeTmpDisposer(tmp) {\n  if (tmp.moved) return Promise.resolve();\n  return rimraf(tmp.target);\n}\nfunction moveToDestination(tmp, cache, sri, opts) {\n  var destination = contentPath(cache, sri);\n  var destDir = path.dirname(destination);\n  return fixOwner.mkdirfix(cache, destDir).then(function () {\n    return moveFile(tmp.target, destination);\n  }).then(function () {\n    tmp.moved = true;\n    return fixOwner.chownr(cache, destination);\n  });\n}\nfunction sizeError(expected, found) {\n  var err = new Error(\"Bad data size: expected inserted data to be \".concat(expected, \" bytes, but got \").concat(found, \" instead\"));\n  err.expected = expected;\n  err.found = found;\n  err.code = 'EBADSIZE';\n  return err;\n}\nfunction checksumError(expected, found) {\n  var err = new Error(\"Integrity check failed:\\n  Wanted: \".concat(expected, \"\\n   Found: \").concat(found));\n  err.code = 'EINTEGRITY';\n  err.expected = expected;\n  err.found = found;\n  return err;\n}","map":{"version":3,"names":["_classCallCheck","require","default","_createClass","_inherits","_createSuper","util","contentPath","fixOwner","fs","moveFile","Minipass","Pipeline","Flush","path","rimraf","promisify","ssri","uniqueFilename","_require","disposer","fsm","writeFile","module","exports","write","cache","data","opts","arguments","length","undefined","algorithms","size","integrity","Error","Promise","reject","sizeError","sri","fromData","checkData","checksumError","makeTmp","makeTmpDisposer","tmp","target","flag","then","moveToDestination","stream","writeStream","CacacheWriteStream","_Flush","_super","_this","call","inputStream","on","er","emit","handleContentP","key","value","chunk","encoding","cb","handleContent","flush","_this2","end","e","code","catch","res","pipeToTmp","tmpTarget","hashStream","integrityStream","i","s","outStream","WriteStream","flags","pipeline","promise","join","tmpPrefix","mkdirfix","dirname","moved","resolve","destination","destDir","chownr","expected","found","err","concat"],"sources":["/Users/aribraun/Desktop/db-import/node_modules/cacache/lib/content/write.js"],"sourcesContent":["'use strict'\n\nconst util = require('util')\n\nconst contentPath = require('./path')\nconst fixOwner = require('../util/fix-owner')\nconst fs = require('fs')\nconst moveFile = require('../util/move-file')\nconst Minipass = require('minipass')\nconst Pipeline = require('minipass-pipeline')\nconst Flush = require('minipass-flush')\nconst path = require('path')\nconst rimraf = util.promisify(require('rimraf'))\nconst ssri = require('ssri')\nconst uniqueFilename = require('unique-filename')\nconst { disposer } = require('./../util/disposer')\nconst fsm = require('fs-minipass')\n\nconst writeFile = util.promisify(fs.writeFile)\n\nmodule.exports = write\n\nfunction write (cache, data, opts = {}) {\n  const { algorithms, size, integrity } = opts\n  if (algorithms && algorithms.length > 1)\n    throw new Error('opts.algorithms only supports a single algorithm for now')\n\n  if (typeof size === 'number' && data.length !== size)\n    return Promise.reject(sizeError(size, data.length))\n\n  const sri = ssri.fromData(data, algorithms ? { algorithms } : {})\n  if (integrity && !ssri.checkData(data, integrity, opts))\n    return Promise.reject(checksumError(integrity, sri))\n\n  return disposer(makeTmp(cache, opts), makeTmpDisposer,\n    (tmp) => {\n      return writeFile(tmp.target, data, { flag: 'wx' })\n        .then(() => moveToDestination(tmp, cache, sri, opts))\n    })\n    .then(() => ({ integrity: sri, size: data.length }))\n}\n\nmodule.exports.stream = writeStream\n\n// writes proxied to the 'inputStream' that is passed to the Promise\n// 'end' is deferred until content is handled.\nclass CacacheWriteStream extends Flush {\n  constructor (cache, opts) {\n    super()\n    this.opts = opts\n    this.cache = cache\n    this.inputStream = new Minipass()\n    this.inputStream.on('error', er => this.emit('error', er))\n    this.inputStream.on('drain', () => this.emit('drain'))\n    this.handleContentP = null\n  }\n\n  write (chunk, encoding, cb) {\n    if (!this.handleContentP) {\n      this.handleContentP = handleContent(\n        this.inputStream,\n        this.cache,\n        this.opts\n      )\n    }\n    return this.inputStream.write(chunk, encoding, cb)\n  }\n\n  flush (cb) {\n    this.inputStream.end(() => {\n      if (!this.handleContentP) {\n        const e = new Error('Cache input stream was empty')\n        e.code = 'ENODATA'\n        // empty streams are probably emitting end right away.\n        // defer this one tick by rejecting a promise on it.\n        return Promise.reject(e).catch(cb)\n      }\n      this.handleContentP.then(\n        (res) => {\n          res.integrity && this.emit('integrity', res.integrity)\n          res.size !== null && this.emit('size', res.size)\n          cb()\n        },\n        (er) => cb(er)\n      )\n    })\n  }\n}\n\nfunction writeStream (cache, opts = {}) {\n  return new CacacheWriteStream(cache, opts)\n}\n\nfunction handleContent (inputStream, cache, opts) {\n  return disposer(makeTmp(cache, opts), makeTmpDisposer, (tmp) => {\n    return pipeToTmp(inputStream, cache, tmp.target, opts)\n      .then((res) => {\n        return moveToDestination(\n          tmp,\n          cache,\n          res.integrity,\n          opts\n        ).then(() => res)\n      })\n  })\n}\n\nfunction pipeToTmp (inputStream, cache, tmpTarget, opts) {\n  let integrity\n  let size\n  const hashStream = ssri.integrityStream({\n    integrity: opts.integrity,\n    algorithms: opts.algorithms,\n    size: opts.size,\n  })\n  hashStream.on('integrity', i => {\n    integrity = i\n  })\n  hashStream.on('size', s => {\n    size = s\n  })\n\n  const outStream = new fsm.WriteStream(tmpTarget, {\n    flags: 'wx',\n  })\n\n  // NB: this can throw if the hashStream has a problem with\n  // it, and the data is fully written.  but pipeToTmp is only\n  // called in promisory contexts where that is handled.\n  const pipeline = new Pipeline(\n    inputStream,\n    hashStream,\n    outStream\n  )\n\n  return pipeline.promise()\n    .then(() => ({ integrity, size }))\n    .catch(er => rimraf(tmpTarget).then(() => {\n      throw er\n    }))\n}\n\nfunction makeTmp (cache, opts) {\n  const tmpTarget = uniqueFilename(path.join(cache, 'tmp'), opts.tmpPrefix)\n  return fixOwner.mkdirfix(cache, path.dirname(tmpTarget)).then(() => ({\n    target: tmpTarget,\n    moved: false,\n  }))\n}\n\nfunction makeTmpDisposer (tmp) {\n  if (tmp.moved)\n    return Promise.resolve()\n\n  return rimraf(tmp.target)\n}\n\nfunction moveToDestination (tmp, cache, sri, opts) {\n  const destination = contentPath(cache, sri)\n  const destDir = path.dirname(destination)\n\n  return fixOwner\n    .mkdirfix(cache, destDir)\n    .then(() => {\n      return moveFile(tmp.target, destination)\n    })\n    .then(() => {\n      tmp.moved = true\n      return fixOwner.chownr(cache, destination)\n    })\n}\n\nfunction sizeError (expected, found) {\n  const err = new Error(`Bad data size: expected inserted data to be ${expected} bytes, but got ${found} instead`)\n  err.expected = expected\n  err.found = found\n  err.code = 'EBADSIZE'\n  return err\n}\n\nfunction checksumError (expected, found) {\n  const err = new Error(`Integrity check failed:\n  Wanted: ${expected}\n   Found: ${found}`)\n  err.code = 'EINTEGRITY'\n  err.expected = expected\n  err.found = found\n  return err\n}\n"],"mappings":"AAAA,YAAY;;AAAA,IAAAA,eAAA,GAAAC,OAAA,4FAAAC,OAAA;AAAA,IAAAC,YAAA,GAAAF,OAAA,yFAAAC,OAAA;AAAA,IAAAE,SAAA,GAAAH,OAAA,sFAAAC,OAAA;AAAA,IAAAG,YAAA,GAAAJ,OAAA,yFAAAC,OAAA;AAEZ,IAAMI,IAAI,GAAGL,OAAO,CAAC,MAAM,CAAC;AAE5B,IAAMM,WAAW,GAAGN,OAAO,CAAC,QAAQ,CAAC;AACrC,IAAMO,QAAQ,GAAGP,OAAO,CAAC,mBAAmB,CAAC;AAC7C,IAAMQ,EAAE,GAAGR,OAAO,CAAC,IAAI,CAAC;AACxB,IAAMS,QAAQ,GAAGT,OAAO,CAAC,mBAAmB,CAAC;AAC7C,IAAMU,QAAQ,GAAGV,OAAO,CAAC,UAAU,CAAC;AACpC,IAAMW,QAAQ,GAAGX,OAAO,CAAC,mBAAmB,CAAC;AAC7C,IAAMY,KAAK,GAAGZ,OAAO,CAAC,gBAAgB,CAAC;AACvC,IAAMa,IAAI,GAAGb,OAAO,CAAC,MAAM,CAAC;AAC5B,IAAMc,MAAM,GAAGT,IAAI,CAACU,SAAS,CAACf,OAAO,CAAC,QAAQ,CAAC,CAAC;AAChD,IAAMgB,IAAI,GAAGhB,OAAO,CAAC,MAAM,CAAC;AAC5B,IAAMiB,cAAc,GAAGjB,OAAO,CAAC,iBAAiB,CAAC;AACjD,IAAAkB,QAAA,GAAqBlB,OAAO,CAAC,oBAAoB,CAAC;EAA1CmB,QAAQ,GAAAD,QAAA,CAARC,QAAQ;AAChB,IAAMC,GAAG,GAAGpB,OAAO,CAAC,aAAa,CAAC;AAElC,IAAMqB,SAAS,GAAGhB,IAAI,CAACU,SAAS,CAACP,EAAE,CAACa,SAAS,CAAC;AAE9CC,MAAM,CAACC,OAAO,GAAGC,KAAK;AAEtB,SAASA,KAAKA,CAAEC,KAAK,EAAEC,IAAI,EAAa;EAAA,IAAXC,IAAI,GAAAC,SAAA,CAAAC,MAAA,QAAAD,SAAA,QAAAE,SAAA,GAAAF,SAAA,MAAG,CAAC,CAAC;EACpC,IAAQG,UAAU,GAAsBJ,IAAI,CAApCI,UAAU;IAAEC,IAAI,GAAgBL,IAAI,CAAxBK,IAAI;IAAEC,SAAS,GAAKN,IAAI,CAAlBM,SAAS;EACnC,IAAIF,UAAU,IAAIA,UAAU,CAACF,MAAM,GAAG,CAAC,EACrC,MAAM,IAAIK,KAAK,CAAC,0DAA0D,CAAC;EAE7E,IAAI,OAAOF,IAAI,KAAK,QAAQ,IAAIN,IAAI,CAACG,MAAM,KAAKG,IAAI,EAClD,OAAOG,OAAO,CAACC,MAAM,CAACC,SAAS,CAACL,IAAI,EAAEN,IAAI,CAACG,MAAM,CAAC,CAAC;EAErD,IAAMS,GAAG,GAAGtB,IAAI,CAACuB,QAAQ,CAACb,IAAI,EAAEK,UAAU,GAAG;IAAEA,UAAU,EAAVA;EAAW,CAAC,GAAG,CAAC,CAAC,CAAC;EACjE,IAAIE,SAAS,IAAI,CAACjB,IAAI,CAACwB,SAAS,CAACd,IAAI,EAAEO,SAAS,EAAEN,IAAI,CAAC,EACrD,OAAOQ,OAAO,CAACC,MAAM,CAACK,aAAa,CAACR,SAAS,EAAEK,GAAG,CAAC,CAAC;EAEtD,OAAOnB,QAAQ,CAACuB,OAAO,CAACjB,KAAK,EAAEE,IAAI,CAAC,EAAEgB,eAAe,EACnD,UAACC,GAAG,EAAK;IACP,OAAOvB,SAAS,CAACuB,GAAG,CAACC,MAAM,EAAEnB,IAAI,EAAE;MAAEoB,IAAI,EAAE;IAAK,CAAC,CAAC,CAC/CC,IAAI,CAAC;MAAA,OAAMC,iBAAiB,CAACJ,GAAG,EAAEnB,KAAK,EAAEa,GAAG,EAAEX,IAAI,CAAC;IAAA,EAAC;EACzD,CAAC,CAAC,CACDoB,IAAI,CAAC;IAAA,OAAO;MAAEd,SAAS,EAAEK,GAAG;MAAEN,IAAI,EAAEN,IAAI,CAACG;IAAO,CAAC;EAAA,CAAC,CAAC;AACxD;AAEAP,MAAM,CAACC,OAAO,CAAC0B,MAAM,GAAGC,WAAW;;AAEnC;AACA;AAAA,IACMC,kBAAkB,0BAAAC,MAAA;EAAAjD,SAAA,CAAAgD,kBAAA,EAAAC,MAAA;EAAA,IAAAC,MAAA,GAAAjD,YAAA,CAAA+C,kBAAA;EACtB,SAAAA,mBAAa1B,KAAK,EAAEE,IAAI,EAAE;IAAA,IAAA2B,KAAA;IAAAvD,eAAA,OAAAoD,kBAAA;IACxBG,KAAA,GAAAD,MAAA,CAAAE,IAAA;IACAD,KAAA,CAAK3B,IAAI,GAAGA,IAAI;IAChB2B,KAAA,CAAK7B,KAAK,GAAGA,KAAK;IAClB6B,KAAA,CAAKE,WAAW,GAAG,IAAI9C,QAAQ,CAAC,CAAC;IACjC4C,KAAA,CAAKE,WAAW,CAACC,EAAE,CAAC,OAAO,EAAE,UAAAC,EAAE;MAAA,OAAIJ,KAAA,CAAKK,IAAI,CAAC,OAAO,EAAED,EAAE,CAAC;IAAA,EAAC;IAC1DJ,KAAA,CAAKE,WAAW,CAACC,EAAE,CAAC,OAAO,EAAE;MAAA,OAAMH,KAAA,CAAKK,IAAI,CAAC,OAAO,CAAC;IAAA,EAAC;IACtDL,KAAA,CAAKM,cAAc,GAAG,IAAI;IAAA,OAAAN,KAAA;EAC5B;EAACpD,YAAA,CAAAiD,kBAAA;IAAAU,GAAA;IAAAC,KAAA,EAED,SAAAtC,MAAOuC,KAAK,EAAEC,QAAQ,EAAEC,EAAE,EAAE;MAC1B,IAAI,CAAC,IAAI,CAACL,cAAc,EAAE;QACxB,IAAI,CAACA,cAAc,GAAGM,aAAa,CACjC,IAAI,CAACV,WAAW,EAChB,IAAI,CAAC/B,KAAK,EACV,IAAI,CAACE,IACP,CAAC;MACH;MACA,OAAO,IAAI,CAAC6B,WAAW,CAAChC,KAAK,CAACuC,KAAK,EAAEC,QAAQ,EAAEC,EAAE,CAAC;IACpD;EAAC;IAAAJ,GAAA;IAAAC,KAAA,EAED,SAAAK,MAAOF,EAAE,EAAE;MAAA,IAAAG,MAAA;MACT,IAAI,CAACZ,WAAW,CAACa,GAAG,CAAC,YAAM;QACzB,IAAI,CAACD,MAAI,CAACR,cAAc,EAAE;UACxB,IAAMU,CAAC,GAAG,IAAIpC,KAAK,CAAC,8BAA8B,CAAC;UACnDoC,CAAC,CAACC,IAAI,GAAG,SAAS;UAClB;UACA;UACA,OAAOpC,OAAO,CAACC,MAAM,CAACkC,CAAC,CAAC,CAACE,KAAK,CAACP,EAAE,CAAC;QACpC;QACAG,MAAI,CAACR,cAAc,CAACb,IAAI,CACtB,UAAC0B,GAAG,EAAK;UACPA,GAAG,CAACxC,SAAS,IAAImC,MAAI,CAACT,IAAI,CAAC,WAAW,EAAEc,GAAG,CAACxC,SAAS,CAAC;UACtDwC,GAAG,CAACzC,IAAI,KAAK,IAAI,IAAIoC,MAAI,CAACT,IAAI,CAAC,MAAM,EAAEc,GAAG,CAACzC,IAAI,CAAC;UAChDiC,EAAE,CAAC,CAAC;QACN,CAAC,EACD,UAACP,EAAE;UAAA,OAAKO,EAAE,CAACP,EAAE,CAAC;QAAA,CAChB,CAAC;MACH,CAAC,CAAC;IACJ;EAAC;EAAA,OAAAP,kBAAA;AAAA,EAxC8BvC,KAAK;AA2CtC,SAASsC,WAAWA,CAAEzB,KAAK,EAAa;EAAA,IAAXE,IAAI,GAAAC,SAAA,CAAAC,MAAA,QAAAD,SAAA,QAAAE,SAAA,GAAAF,SAAA,MAAG,CAAC,CAAC;EACpC,OAAO,IAAIuB,kBAAkB,CAAC1B,KAAK,EAAEE,IAAI,CAAC;AAC5C;AAEA,SAASuC,aAAaA,CAAEV,WAAW,EAAE/B,KAAK,EAAEE,IAAI,EAAE;EAChD,OAAOR,QAAQ,CAACuB,OAAO,CAACjB,KAAK,EAAEE,IAAI,CAAC,EAAEgB,eAAe,EAAE,UAACC,GAAG,EAAK;IAC9D,OAAO8B,SAAS,CAAClB,WAAW,EAAE/B,KAAK,EAAEmB,GAAG,CAACC,MAAM,EAAElB,IAAI,CAAC,CACnDoB,IAAI,CAAC,UAAC0B,GAAG,EAAK;MACb,OAAOzB,iBAAiB,CACtBJ,GAAG,EACHnB,KAAK,EACLgD,GAAG,CAACxC,SAAS,EACbN,IACF,CAAC,CAACoB,IAAI,CAAC;QAAA,OAAM0B,GAAG;MAAA,EAAC;IACnB,CAAC,CAAC;EACN,CAAC,CAAC;AACJ;AAEA,SAASC,SAASA,CAAElB,WAAW,EAAE/B,KAAK,EAAEkD,SAAS,EAAEhD,IAAI,EAAE;EACvD,IAAIM,SAAS;EACb,IAAID,IAAI;EACR,IAAM4C,UAAU,GAAG5D,IAAI,CAAC6D,eAAe,CAAC;IACtC5C,SAAS,EAAEN,IAAI,CAACM,SAAS;IACzBF,UAAU,EAAEJ,IAAI,CAACI,UAAU;IAC3BC,IAAI,EAAEL,IAAI,CAACK;EACb,CAAC,CAAC;EACF4C,UAAU,CAACnB,EAAE,CAAC,WAAW,EAAE,UAAAqB,CAAC,EAAI;IAC9B7C,SAAS,GAAG6C,CAAC;EACf,CAAC,CAAC;EACFF,UAAU,CAACnB,EAAE,CAAC,MAAM,EAAE,UAAAsB,CAAC,EAAI;IACzB/C,IAAI,GAAG+C,CAAC;EACV,CAAC,CAAC;EAEF,IAAMC,SAAS,GAAG,IAAI5D,GAAG,CAAC6D,WAAW,CAACN,SAAS,EAAE;IAC/CO,KAAK,EAAE;EACT,CAAC,CAAC;;EAEF;EACA;EACA;EACA,IAAMC,QAAQ,GAAG,IAAIxE,QAAQ,CAC3B6C,WAAW,EACXoB,UAAU,EACVI,SACF,CAAC;EAED,OAAOG,QAAQ,CAACC,OAAO,CAAC,CAAC,CACtBrC,IAAI,CAAC;IAAA,OAAO;MAAEd,SAAS,EAATA,SAAS;MAAED,IAAI,EAAJA;IAAK,CAAC;EAAA,CAAC,CAAC,CACjCwC,KAAK,CAAC,UAAAd,EAAE;IAAA,OAAI5C,MAAM,CAAC6D,SAAS,CAAC,CAAC5B,IAAI,CAAC,YAAM;MACxC,MAAMW,EAAE;IACV,CAAC,CAAC;EAAA,EAAC;AACP;AAEA,SAAShB,OAAOA,CAAEjB,KAAK,EAAEE,IAAI,EAAE;EAC7B,IAAMgD,SAAS,GAAG1D,cAAc,CAACJ,IAAI,CAACwE,IAAI,CAAC5D,KAAK,EAAE,KAAK,CAAC,EAAEE,IAAI,CAAC2D,SAAS,CAAC;EACzE,OAAO/E,QAAQ,CAACgF,QAAQ,CAAC9D,KAAK,EAAEZ,IAAI,CAAC2E,OAAO,CAACb,SAAS,CAAC,CAAC,CAAC5B,IAAI,CAAC;IAAA,OAAO;MACnEF,MAAM,EAAE8B,SAAS;MACjBc,KAAK,EAAE;IACT,CAAC;EAAA,CAAC,CAAC;AACL;AAEA,SAAS9C,eAAeA,CAAEC,GAAG,EAAE;EAC7B,IAAIA,GAAG,CAAC6C,KAAK,EACX,OAAOtD,OAAO,CAACuD,OAAO,CAAC,CAAC;EAE1B,OAAO5E,MAAM,CAAC8B,GAAG,CAACC,MAAM,CAAC;AAC3B;AAEA,SAASG,iBAAiBA,CAAEJ,GAAG,EAAEnB,KAAK,EAAEa,GAAG,EAAEX,IAAI,EAAE;EACjD,IAAMgE,WAAW,GAAGrF,WAAW,CAACmB,KAAK,EAAEa,GAAG,CAAC;EAC3C,IAAMsD,OAAO,GAAG/E,IAAI,CAAC2E,OAAO,CAACG,WAAW,CAAC;EAEzC,OAAOpF,QAAQ,CACZgF,QAAQ,CAAC9D,KAAK,EAAEmE,OAAO,CAAC,CACxB7C,IAAI,CAAC,YAAM;IACV,OAAOtC,QAAQ,CAACmC,GAAG,CAACC,MAAM,EAAE8C,WAAW,CAAC;EAC1C,CAAC,CAAC,CACD5C,IAAI,CAAC,YAAM;IACVH,GAAG,CAAC6C,KAAK,GAAG,IAAI;IAChB,OAAOlF,QAAQ,CAACsF,MAAM,CAACpE,KAAK,EAAEkE,WAAW,CAAC;EAC5C,CAAC,CAAC;AACN;AAEA,SAAStD,SAASA,CAAEyD,QAAQ,EAAEC,KAAK,EAAE;EACnC,IAAMC,GAAG,GAAG,IAAI9D,KAAK,gDAAA+D,MAAA,CAAgDH,QAAQ,sBAAAG,MAAA,CAAmBF,KAAK,aAAU,CAAC;EAChHC,GAAG,CAACF,QAAQ,GAAGA,QAAQ;EACvBE,GAAG,CAACD,KAAK,GAAGA,KAAK;EACjBC,GAAG,CAACzB,IAAI,GAAG,UAAU;EACrB,OAAOyB,GAAG;AACZ;AAEA,SAASvD,aAAaA,CAAEqD,QAAQ,EAAEC,KAAK,EAAE;EACvC,IAAMC,GAAG,GAAG,IAAI9D,KAAK,uCAAA+D,MAAA,CACXH,QAAQ,kBAAAG,MAAA,CACRF,KAAK,CAAE,CAAC;EAClBC,GAAG,CAACzB,IAAI,GAAG,YAAY;EACvByB,GAAG,CAACF,QAAQ,GAAGA,QAAQ;EACvBE,GAAG,CAACD,KAAK,GAAGA,KAAK;EACjB,OAAOC,GAAG;AACZ"},"metadata":{},"sourceType":"script"}