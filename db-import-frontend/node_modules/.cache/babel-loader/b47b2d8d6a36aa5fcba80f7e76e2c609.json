{"ast":null,"code":"import _regeneratorRuntime from\"/Users/aribraun/Desktop/db-import/db-import-frontend/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"/Users/aribraun/Desktop/db-import/db-import-frontend/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"/Users/aribraun/Desktop/db-import/db-import-frontend/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React,{useState}from'react';import'../backend';import{basicGet,basicSocket}from'../backend';import{ConfirmationPopup}from'./Modal';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var ImportForm=function ImportForm(){var _useState=useState('https://data.cityofnewyork.us/api/views/xubg-57si/rows.json'),_useState2=_slicedToArray(_useState,2),link=_useState2[0],setLink=_useState2[1];var _useState3=useState('table'),_useState4=_slicedToArray(_useState3,2),DBName=_useState4[0],setDBName=_useState4[1];var _useState5=useState(''),_useState6=_slicedToArray(_useState5,2),message=_useState6[0],setMessage=_useState6[1];var _useState7=useState('white'),_useState8=_slicedToArray(_useState7,2),messageColor=_useState8[0],setMessageColor=_useState8[1];var _useState9=useState(false),_useState10=_slicedToArray(_useState9,2),popup=_useState10[0],setPopup=_useState10[1];var handleChange=function handleChange(event,setter){setter(event.target.value);};var handlePopupConfirm=function handlePopupConfirm(event){setPopup(false);handleSubmit(event,true);};var handlePopupCancel=function handlePopupCancel(event){setPopup(false);};var handleSubmit=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(event,force){var _yield$basicGet,_yield$basicGet2,res,message;return _regeneratorRuntime().wrap(function _callee$(_context){while(1)switch(_context.prev=_context.next){case 0:event.preventDefault();setMessageColor('#55FFFF');setMessage('Loading...');_context.next=5;return basicGet(link,DBName,force);case 5:_yield$basicGet=_context.sent;_yield$basicGet2=_slicedToArray(_yield$basicGet,2);res=_yield$basicGet2[0];message=_yield$basicGet2[1];if(res.status==302)setPopup(true);setMessage(message);setMessageColor(res.status==200?'#55FF55':'#FF5555');case 12:case\"end\":return _context.stop();}},_callee);}));return function handleSubmit(_x,_x2){return _ref.apply(this,arguments);};}();return/*#__PURE__*/_jsxs(\"form\",{onSubmit:function onSubmit(event){return handleSubmit(event,false);},children:[\"Enter link to dataset:\",/*#__PURE__*/_jsx(\"input\",{type:\"text\",value:link,onChange:function onChange(event){return handleChange(event,setLink);}}),\" \",/*#__PURE__*/_jsx(\"br\",{}),\"Enter desired table name:\",/*#__PURE__*/_jsx(\"input\",{type:\"text\",value:DBName,onChange:function onChange(event){return handleChange(event,setDBName);}}),/*#__PURE__*/_jsx(\"br\",{}),!popup&&/*#__PURE__*/_jsx(\"button\",{type:\"submit\",children:\"Submit\"}),message&&/*#__PURE__*/_jsx(\"p\",{style:{color:messageColor},children:message}),popup&&/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"p\",{children:\"Are you sure you want to proceed?\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"popup-actions\",children:[/*#__PURE__*/_jsx(\"button\",{onClick:handlePopupConfirm,children:\"Yes\"}),/*#__PURE__*/_jsx(\"button\",{onClick:handlePopupCancel,children:\"No\"})]})]})]});};export{ImportForm};","map":{"version":3,"names":["React","useState","basicGet","basicSocket","ConfirmationPopup","jsx","_jsx","jsxs","_jsxs","ImportForm","_useState","_useState2","_slicedToArray","link","setLink","_useState3","_useState4","DBName","setDBName","_useState5","_useState6","message","setMessage","_useState7","_useState8","messageColor","setMessageColor","_useState9","_useState10","popup","setPopup","handleChange","event","setter","target","value","handlePopupConfirm","handleSubmit","handlePopupCancel","_ref","_asyncToGenerator","_regeneratorRuntime","mark","_callee","force","_yield$basicGet","_yield$basicGet2","res","wrap","_callee$","_context","prev","next","preventDefault","sent","status","stop","_x","_x2","apply","arguments","onSubmit","children","type","onChange","style","color","className","onClick"],"sources":["/Users/aribraun/Desktop/db-import/db-import-frontend/src/Components/ImportForm.js"],"sourcesContent":["\nimport React, {useState} from 'react';\nimport '../backend'\nimport { basicGet, basicSocket } from '../backend';\nimport {ConfirmationPopup} from './Modal'\n\nconst ImportForm = () => {\n  const [link, setLink] = useState('https://data.cityofnewyork.us/api/views/xubg-57si/rows.json');\n  const[DBName, setDBName] = useState('table');\n  const [message, setMessage] = useState('');\n  const [messageColor, setMessageColor] = useState('white');\n  const [popup, setPopup] = useState(false);\n\n  const handleChange = (event, setter) => {\n    setter(event.target.value);\n  };\n\n  const handlePopupConfirm = (event) => {\n    setPopup(false);\n    handleSubmit(event, true);\n  };\n\n  const handlePopupCancel = (event) => {\n    setPopup(false);\n  };\n\n  const handleSubmit = async(event, force) => {\n    event.preventDefault();\n\n    setMessageColor('#55FFFF')\n    setMessage('Loading...')\n    let [res, message] = await basicGet(link, DBName, force);\n    if(res.status==302) setPopup(true)\n    setMessage(message)\n    setMessageColor(res.status==200? '#55FF55':'#FF5555')\n  };\n\n  return (\n    <form onSubmit={(event)=>handleSubmit(event, false)}>\n      Enter link to dataset: \n      <input type=\"text\" value={link} onChange={(event)=>handleChange(event, setLink)} /> <br/>\n      Enter desired table name:\n      <input type=\"text\" value={DBName} onChange={(event)=>handleChange(event, setDBName)} /><br/>\n      {!popup && <button type=\"submit\">Submit</button>}\n      {message && <p style={{ color: messageColor }}>{message}</p>}\n      {popup && (\n        <div>\n          <p>Are you sure you want to proceed?</p>\n          <div className=\"popup-actions\">\n            <button onClick={handlePopupConfirm}>Yes</button>\n            <button onClick={handlePopupCancel}>No</button>\n          </div>\n        </div>\n      )}\n    </form>\n  );\n};\n\nexport {ImportForm};"],"mappings":"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"},"metadata":{},"sourceType":"module"}