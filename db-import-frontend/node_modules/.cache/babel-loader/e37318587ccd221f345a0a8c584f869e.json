{"ast":null,"code":"'use strict';\n\n//Parse method copied from https://github.com/brianc/node-postgres\n//Copyright (c) 2010-2014 Brian Carlson (brian.m.carlson@gmail.com)\n//MIT License\n\n//parses a connection string\nvar _createForOfIteratorHelper = require(\"/Users/aribraun/Desktop/db-import/node_modules/@babel/runtime/helpers/createForOfIteratorHelper.js\").default;\nfunction parse(str) {\n  //unix socket\n  if (str.charAt(0) === '/') {\n    var _config = str.split(' ');\n    return {\n      host: _config[0],\n      database: _config[1]\n    };\n  }\n\n  // Check for empty host in URL\n\n  var config = {};\n  var result;\n  var dummyHost = false;\n  if (/ |%[^a-f0-9]|%[a-f0-9][^a-f0-9]/i.test(str)) {\n    // Ensure spaces are encoded as %20\n    str = encodeURI(str).replace(/\\%25(\\d\\d)/g, '%$1');\n  }\n  try {\n    result = new URL(str, 'postgres://base');\n  } catch (e) {\n    // The URL is invalid so try again with a dummy host\n    result = new URL(str.replace('@/', '@___DUMMY___/'), 'postgres://base');\n    dummyHost = true;\n  }\n\n  // We'd like to use Object.fromEntries() here but Node.js 10 does not support it\n  var _iterator = _createForOfIteratorHelper(result.searchParams.entries()),\n    _step;\n  try {\n    for (_iterator.s(); !(_step = _iterator.n()).done;) {\n      var entry = _step.value;\n      config[entry[0]] = entry[1];\n    }\n  } catch (err) {\n    _iterator.e(err);\n  } finally {\n    _iterator.f();\n  }\n  config.user = config.user || decodeURIComponent(result.username);\n  config.password = config.password || decodeURIComponent(result.password);\n  config.port = result.port;\n  if (result.protocol == 'socket:') {\n    config.host = decodeURI(result.pathname);\n    config.database = result.searchParams.get('db');\n    config.client_encoding = result.searchParams.get('encoding');\n    return config;\n  }\n  var hostname = dummyHost ? '' : result.hostname;\n  if (!config.host) {\n    // Only set the host if there is no equivalent query param.\n    config.host = decodeURIComponent(hostname);\n  } else if (hostname) {\n    result.pathname = hostname + result.pathname;\n  }\n  var pathname = result.pathname.slice(1) || null;\n  config.database = pathname ? decodeURI(pathname) : null;\n  if (config.ssl === 'true' || config.ssl === '1') {\n    config.ssl = true;\n  }\n  if (config.ssl === '0') {\n    config.ssl = false;\n  }\n  if (config.sslcert || config.sslkey || config.sslrootcert || config.sslmode) {\n    config.ssl = {};\n  }\n\n  // Only try to load fs if we expect to read from the disk\n  var fs = config.sslcert || config.sslkey || config.sslrootcert ? require('fs') : null;\n  if (config.sslcert) {\n    config.ssl.cert = fs.readFileSync(config.sslcert).toString();\n  }\n  if (config.sslkey) {\n    config.ssl.key = fs.readFileSync(config.sslkey).toString();\n  }\n  if (config.sslrootcert) {\n    config.ssl.ca = fs.readFileSync(config.sslrootcert).toString();\n  }\n  switch (config.sslmode) {\n    case 'disable':\n      {\n        config.ssl = false;\n        break;\n      }\n    case 'prefer':\n    case 'require':\n    case 'verify-ca':\n    case 'verify-full':\n      {\n        break;\n      }\n    case 'no-verify':\n      {\n        config.ssl.rejectUnauthorized = false;\n        break;\n      }\n  }\n  return config;\n}\nmodule.exports = parse;\nparse.parse = parse;","map":{"version":3,"names":["_createForOfIteratorHelper","require","default","parse","str","charAt","config","split","host","database","result","dummyHost","test","encodeURI","replace","URL","e","_iterator","searchParams","entries","_step","s","n","done","entry","value","err","f","user","decodeURIComponent","username","password","port","protocol","decodeURI","pathname","get","client_encoding","hostname","slice","ssl","sslcert","sslkey","sslrootcert","sslmode","fs","cert","readFileSync","toString","key","ca","rejectUnauthorized","module","exports"],"sources":["/Users/aribraun/Desktop/db-import/node_modules/pg-connection-string/index.js"],"sourcesContent":["'use strict'\n\n//Parse method copied from https://github.com/brianc/node-postgres\n//Copyright (c) 2010-2014 Brian Carlson (brian.m.carlson@gmail.com)\n//MIT License\n\n//parses a connection string\nfunction parse(str) {\n  //unix socket\n  if (str.charAt(0) === '/') {\n    const config = str.split(' ')\n    return { host: config[0], database: config[1] }\n  }\n\n  // Check for empty host in URL\n\n  const config = {}\n  let result\n  let dummyHost = false\n  if (/ |%[^a-f0-9]|%[a-f0-9][^a-f0-9]/i.test(str)) {\n    // Ensure spaces are encoded as %20\n    str = encodeURI(str).replace(/\\%25(\\d\\d)/g, '%$1')\n  }\n\n  try {\n    result = new URL(str, 'postgres://base')\n  } catch (e) {\n    // The URL is invalid so try again with a dummy host\n    result = new URL(str.replace('@/', '@___DUMMY___/'), 'postgres://base')\n    dummyHost = true\n  }\n\n  // We'd like to use Object.fromEntries() here but Node.js 10 does not support it\n  for (const entry of result.searchParams.entries()) {\n    config[entry[0]] = entry[1]\n  }\n\n  config.user = config.user || decodeURIComponent(result.username)\n  config.password = config.password || decodeURIComponent(result.password)\n\n  config.port = result.port\n  if (result.protocol == 'socket:') {\n    config.host = decodeURI(result.pathname)\n    config.database = result.searchParams.get('db')\n    config.client_encoding = result.searchParams.get('encoding')\n    return config\n  }\n  const hostname = dummyHost ? '' : result.hostname\n  if (!config.host) {\n    // Only set the host if there is no equivalent query param.\n    config.host = decodeURIComponent(hostname)\n  } else if (hostname) {\n    result.pathname = hostname + result.pathname\n  }\n\n  const pathname = result.pathname.slice(1) || null\n  config.database = pathname ? decodeURI(pathname) : null\n\n  if (config.ssl === 'true' || config.ssl === '1') {\n    config.ssl = true\n  }\n\n  if (config.ssl === '0') {\n    config.ssl = false\n  }\n\n  if (config.sslcert || config.sslkey || config.sslrootcert || config.sslmode) {\n    config.ssl = {}\n  }\n\n  // Only try to load fs if we expect to read from the disk\n  const fs = config.sslcert || config.sslkey || config.sslrootcert ? require('fs') : null\n\n  if (config.sslcert) {\n    config.ssl.cert = fs.readFileSync(config.sslcert).toString()\n  }\n\n  if (config.sslkey) {\n    config.ssl.key = fs.readFileSync(config.sslkey).toString()\n  }\n\n  if (config.sslrootcert) {\n    config.ssl.ca = fs.readFileSync(config.sslrootcert).toString()\n  }\n\n  switch (config.sslmode) {\n    case 'disable': {\n      config.ssl = false\n      break\n    }\n    case 'prefer':\n    case 'require':\n    case 'verify-ca':\n    case 'verify-full': {\n      break\n    }\n    case 'no-verify': {\n      config.ssl.rejectUnauthorized = false\n      break\n    }\n  }\n\n  return config\n}\n\nmodule.exports = parse\n\nparse.parse = parse\n"],"mappings":"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"},"metadata":{},"sourceType":"script"}