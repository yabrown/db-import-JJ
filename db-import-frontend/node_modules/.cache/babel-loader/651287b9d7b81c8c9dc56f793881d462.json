{"ast":null,"code":"\"use strict\";\n\nvar _classCallCheck = require(\"/Users/aribraun/Desktop/db-import/node_modules/@babel/runtime/helpers/classCallCheck.js\").default;\nvar _createClass = require(\"/Users/aribraun/Desktop/db-import/node_modules/@babel/runtime/helpers/createClass.js\").default;\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.ReceiveBuffer = void 0;\nvar ReceiveBuffer = /*#__PURE__*/function () {\n  function ReceiveBuffer() {\n    var size = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : 4096;\n    _classCallCheck(this, ReceiveBuffer);\n    this.buffer = Buffer.allocUnsafe(size);\n    this.offset = 0;\n    this.originalSize = size;\n  }\n  _createClass(ReceiveBuffer, [{\n    key: \"length\",\n    get: function get() {\n      return this.offset;\n    }\n  }, {\n    key: \"append\",\n    value: function append(data) {\n      if (!Buffer.isBuffer(data)) {\n        throw new Error('Attempted to append a non-buffer instance to ReceiveBuffer.');\n      }\n      if (this.offset + data.length >= this.buffer.length) {\n        var tmp = this.buffer;\n        this.buffer = Buffer.allocUnsafe(Math.max(this.buffer.length + this.originalSize, this.buffer.length + data.length));\n        tmp.copy(this.buffer);\n      }\n      data.copy(this.buffer, this.offset);\n      return this.offset += data.length;\n    }\n  }, {\n    key: \"peek\",\n    value: function peek(length) {\n      if (length > this.offset) {\n        throw new Error('Attempted to read beyond the bounds of the managed internal data.');\n      }\n      return this.buffer.slice(0, length);\n    }\n  }, {\n    key: \"get\",\n    value: function get(length) {\n      if (length > this.offset) {\n        throw new Error('Attempted to read beyond the bounds of the managed internal data.');\n      }\n      var value = Buffer.allocUnsafe(length);\n      this.buffer.slice(0, length).copy(value);\n      this.buffer.copyWithin(0, length, length + this.offset - length);\n      this.offset -= length;\n      return value;\n    }\n  }]);\n  return ReceiveBuffer;\n}();\nexports.ReceiveBuffer = ReceiveBuffer;","map":{"version":3,"names":["ReceiveBuffer","size","arguments","length","undefined","_classCallCheck","buffer","Buffer","allocUnsafe","offset","originalSize","_createClass","key","get","value","append","data","isBuffer","Error","tmp","Math","max","copy","peek","slice","copyWithin","exports"],"sources":["../../src/common/receivebuffer.ts"],"sourcesContent":[null],"mappings":";;;;;;;;IAAMA,aAAa;EAKjB,SAAAA,cAAA,EAAuB;IAAA,IAAXC,IAAI,GAAAC,SAAA,CAAAC,MAAA,QAAAD,SAAA,QAAAE,SAAA,GAAAF,SAAA,MAAG,IAAI;IAAAG,eAAA,OAAAL,aAAA;IACrB,IAAI,CAACM,MAAM,GAAGC,MAAM,CAACC,WAAW,CAACP,IAAI,CAAC;IACtC,IAAI,CAACQ,MAAM,GAAG,CAAC;IACf,IAAI,CAACC,YAAY,GAAGT,IAAI;EAC1B;EAACU,YAAA,CAAAX,aAAA;IAAAY,GAAA;IAAAC,GAAA,EAED,SAAAA,IAAA,EAAU;MACR,OAAO,IAAI,CAACJ,MAAM;IACpB;EAAC;IAAAG,GAAA;IAAAE,KAAA,EAED,SAAAC,OAAOC,IAAY;MACjB,IAAI,CAACT,MAAM,CAACU,QAAQ,CAACD,IAAI,CAAC,EAAE;QAC1B,MAAM,IAAIE,KAAK,CACb,6DAA6D,CAC9D;;MAGH,IAAI,IAAI,CAACT,MAAM,GAAGO,IAAI,CAACb,MAAM,IAAI,IAAI,CAACG,MAAM,CAACH,MAAM,EAAE;QACnD,IAAMgB,GAAG,GAAG,IAAI,CAACb,MAAM;QACvB,IAAI,CAACA,MAAM,GAAGC,MAAM,CAACC,WAAW,CAC9BY,IAAI,CAACC,GAAG,CACN,IAAI,CAACf,MAAM,CAACH,MAAM,GAAG,IAAI,CAACO,YAAY,EACtC,IAAI,CAACJ,MAAM,CAACH,MAAM,GAAGa,IAAI,CAACb,MAAM,CACjC,CACF;QACDgB,GAAG,CAACG,IAAI,CAAC,IAAI,CAAChB,MAAM,CAAC;;MAGvBU,IAAI,CAACM,IAAI,CAAC,IAAI,CAAChB,MAAM,EAAE,IAAI,CAACG,MAAM,CAAC;MACnC,OAAQ,IAAI,CAACA,MAAM,IAAIO,IAAI,CAACb,MAAM;IACpC;EAAC;IAAAS,GAAA;IAAAE,KAAA,EAED,SAAAS,KAAKpB,MAAc;MACjB,IAAIA,MAAM,GAAG,IAAI,CAACM,MAAM,EAAE;QACxB,MAAM,IAAIS,KAAK,CACb,mEAAmE,CACpE;;MAEH,OAAO,IAAI,CAACZ,MAAM,CAACkB,KAAK,CAAC,CAAC,EAAErB,MAAM,CAAC;IACrC;EAAC;IAAAS,GAAA;IAAAE,KAAA,EAED,SAAAD,IAAIV,MAAc;MAChB,IAAIA,MAAM,GAAG,IAAI,CAACM,MAAM,EAAE;QACxB,MAAM,IAAIS,KAAK,CACb,mEAAmE,CACpE;;MAGH,IAAMJ,KAAK,GAAGP,MAAM,CAACC,WAAW,CAACL,MAAM,CAAC;MACxC,IAAI,CAACG,MAAM,CAACkB,KAAK,CAAC,CAAC,EAAErB,MAAM,CAAC,CAACmB,IAAI,CAACR,KAAK,CAAC;MACxC,IAAI,CAACR,MAAM,CAACmB,UAAU,CAAC,CAAC,EAAEtB,MAAM,EAAEA,MAAM,GAAG,IAAI,CAACM,MAAM,GAAGN,MAAM,CAAC;MAChE,IAAI,CAACM,MAAM,IAAIN,MAAM;MAErB,OAAOW,KAAK;IACd;EAAC;EAAA,OAAAd,aAAA;AAAA;AAGK0B,OAAA,CAAA1B,aAAA,GAAAA,aAAA"},"metadata":{},"sourceType":"script"}