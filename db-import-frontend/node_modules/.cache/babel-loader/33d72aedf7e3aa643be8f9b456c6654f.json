{"ast":null,"code":"/*! @azure/msal-common v13.0.0 2023-05-01 */\n'use strict';\n\nimport { __extends } from '../_virtual/_tslib.js';\nimport { Constants } from '../utils/Constants.js';\nimport { AuthError } from './AuthError.js';\n\n/*\r\n * Copyright (c) Microsoft Corporation. All rights reserved.\r\n * Licensed under the MIT License.\r\n */\n/**\r\n * InteractionRequiredServerErrorMessage contains string constants used by error codes and messages returned by the server indicating interaction is required\r\n */\nvar InteractionRequiredServerErrorMessage = [\"interaction_required\", \"consent_required\", \"login_required\"];\nvar InteractionRequiredAuthSubErrorMessage = [\"message_only\", \"additional_action\", \"basic_action\", \"user_password_expired\", \"consent_required\"];\n/**\r\n * Interaction required errors defined by the SDK\r\n */\nvar InteractionRequiredAuthErrorMessage = {\n  noTokensFoundError: {\n    code: \"no_tokens_found\",\n    desc: \"No refresh token found in the cache. Please sign-in.\"\n  },\n  native_account_unavailable: {\n    code: \"native_account_unavailable\",\n    desc: \"The requested account is not available in the native broker. It may have been deleted or logged out. Please sign-in again using an interactive API.\"\n  }\n};\n/**\r\n * Error thrown when user interaction is required.\r\n */\nvar InteractionRequiredAuthError = /** @class */function (_super) {\n  __extends(InteractionRequiredAuthError, _super);\n  function InteractionRequiredAuthError(errorCode, errorMessage, subError, timestamp, traceId, correlationId, claims) {\n    var _this = _super.call(this, errorCode, errorMessage, subError) || this;\n    Object.setPrototypeOf(_this, InteractionRequiredAuthError.prototype);\n    _this.timestamp = timestamp || Constants.EMPTY_STRING;\n    _this.traceId = traceId || Constants.EMPTY_STRING;\n    _this.correlationId = correlationId || Constants.EMPTY_STRING;\n    _this.claims = claims || Constants.EMPTY_STRING;\n    _this.name = \"InteractionRequiredAuthError\";\n    return _this;\n  }\n  /**\r\n   * Helper function used to determine if an error thrown by the server requires interaction to resolve\r\n   * @param errorCode\r\n   * @param errorString\r\n   * @param subError\r\n   */\n  InteractionRequiredAuthError.isInteractionRequiredError = function (errorCode, errorString, subError) {\n    var isInteractionRequiredErrorCode = !!errorCode && InteractionRequiredServerErrorMessage.indexOf(errorCode) > -1;\n    var isInteractionRequiredSubError = !!subError && InteractionRequiredAuthSubErrorMessage.indexOf(subError) > -1;\n    var isInteractionRequiredErrorDesc = !!errorString && InteractionRequiredServerErrorMessage.some(function (irErrorCode) {\n      return errorString.indexOf(irErrorCode) > -1;\n    });\n    return isInteractionRequiredErrorCode || isInteractionRequiredErrorDesc || isInteractionRequiredSubError;\n  };\n  /**\r\n   * Creates an error thrown when the authorization code required for a token request is null or empty.\r\n   */\n  InteractionRequiredAuthError.createNoTokensFoundError = function () {\n    return new InteractionRequiredAuthError(InteractionRequiredAuthErrorMessage.noTokensFoundError.code, InteractionRequiredAuthErrorMessage.noTokensFoundError.desc);\n  };\n  /**\r\n   * Creates an error thrown when the native broker returns ACCOUNT_UNAVAILABLE status, indicating that the account was removed and interactive sign-in is required\r\n   * @returns\r\n   */\n  InteractionRequiredAuthError.createNativeAccountUnavailableError = function () {\n    return new InteractionRequiredAuthError(InteractionRequiredAuthErrorMessage.native_account_unavailable.code, InteractionRequiredAuthErrorMessage.native_account_unavailable.desc);\n  };\n  return InteractionRequiredAuthError;\n}(AuthError);\nexport { InteractionRequiredAuthError, InteractionRequiredAuthErrorMessage, InteractionRequiredAuthSubErrorMessage, InteractionRequiredServerErrorMessage };","map":{"version":3,"names":["InteractionRequiredServerErrorMessage","InteractionRequiredAuthSubErrorMessage","InteractionRequiredAuthErrorMessage","noTokensFoundError","code","desc","native_account_unavailable","InteractionRequiredAuthError","_super","__extends","errorCode","errorMessage","subError","timestamp","traceId","correlationId","claims","_this","call","Object","setPrototypeOf","prototype","Constants","EMPTY_STRING","name","isInteractionRequiredError","errorString","isInteractionRequiredErrorCode","indexOf","isInteractionRequiredSubError","isInteractionRequiredErrorDesc","some","irErrorCode","createNoTokensFoundError","createNativeAccountUnavailableError","AuthError"],"sources":["../../src/error/InteractionRequiredAuthError.ts"],"sourcesContent":["/*\n * Copyright (c) Microsoft Corporation. All rights reserved.\n * Licensed under the MIT License.\n */\n\nimport { Constants } from \"../utils/Constants\";\nimport { AuthError } from \"./AuthError\";\n\n/**\n * InteractionRequiredServerErrorMessage contains string constants used by error codes and messages returned by the server indicating interaction is required\n */\nexport const InteractionRequiredServerErrorMessage = [\n    \"interaction_required\",\n    \"consent_required\",\n    \"login_required\"\n];\n\nexport const InteractionRequiredAuthSubErrorMessage = [\n    \"message_only\",\n    \"additional_action\",\n    \"basic_action\",\n    \"user_password_expired\",\n    \"consent_required\"\n];\n\n/**\n * Interaction required errors defined by the SDK\n */\nexport const InteractionRequiredAuthErrorMessage = {\n    noTokensFoundError: {\n        code: \"no_tokens_found\",\n        desc: \"No refresh token found in the cache. Please sign-in.\"\n    },\n    native_account_unavailable: {\n        code: \"native_account_unavailable\",\n        desc: \"The requested account is not available in the native broker. It may have been deleted or logged out. Please sign-in again using an interactive API.\"\n    }\n};\n\n/**\n * Error thrown when user interaction is required.\n */\nexport class InteractionRequiredAuthError extends AuthError {\n    /**\n     * The time the error occured at\n     */\n    timestamp: string;\n\n    /**\n     * TraceId associated with the error\n     */\n    traceId: string;\n\n    /**\n     * https://github.com/AzureAD/microsoft-authentication-library-for-js/blob/dev/lib/msal-common/docs/claims-challenge.md\n     * \n     * A string with extra claims needed for the token request to succeed\n     * web site: redirect the user to the authorization page and set the extra claims\n     * web api: include the claims in the WWW-Authenticate header that are sent back to the client so that it knows to request a token with the extra claims\n     * desktop application or browser context: include the claims when acquiring the token interactively\n     * app to app context (client_credentials): include the claims in the AcquireTokenByClientCredential request\n     */\n    claims: string;\n\n    constructor(errorCode?: string, errorMessage?: string, subError?: string, timestamp?: string, traceId?: string, correlationId?: string, claims?: string) {\n        super(errorCode, errorMessage, subError);\n        Object.setPrototypeOf(this, InteractionRequiredAuthError.prototype);\n        \n        this.timestamp = timestamp || Constants.EMPTY_STRING;\n        this.traceId = traceId || Constants.EMPTY_STRING;\n        this.correlationId = correlationId || Constants.EMPTY_STRING;\n        this.claims = claims || Constants.EMPTY_STRING;\n        this.name = \"InteractionRequiredAuthError\";\n    }\n\n    /**\n     * Helper function used to determine if an error thrown by the server requires interaction to resolve\n     * @param errorCode \n     * @param errorString \n     * @param subError \n     */\n    static isInteractionRequiredError(errorCode?: string, errorString?: string, subError?: string): boolean {\n        const isInteractionRequiredErrorCode = !!errorCode && InteractionRequiredServerErrorMessage.indexOf(errorCode) > -1;\n        const isInteractionRequiredSubError = !!subError && InteractionRequiredAuthSubErrorMessage.indexOf(subError) > -1;\n        const isInteractionRequiredErrorDesc = !!errorString && InteractionRequiredServerErrorMessage.some((irErrorCode) => {\n            return errorString.indexOf(irErrorCode) > -1;\n        });\n\n        return isInteractionRequiredErrorCode || isInteractionRequiredErrorDesc || isInteractionRequiredSubError;\n    }\n\n    /**\n     * Creates an error thrown when the authorization code required for a token request is null or empty.\n     */\n    static createNoTokensFoundError(): InteractionRequiredAuthError {\n        return new InteractionRequiredAuthError(InteractionRequiredAuthErrorMessage.noTokensFoundError.code, InteractionRequiredAuthErrorMessage.noTokensFoundError.desc);\n    }\n\n    /**\n     * Creates an error thrown when the native broker returns ACCOUNT_UNAVAILABLE status, indicating that the account was removed and interactive sign-in is required\n     * @returns \n     */\n    static createNativeAccountUnavailableError(): InteractionRequiredAuthError {\n        return new InteractionRequiredAuthError(InteractionRequiredAuthErrorMessage.native_account_unavailable.code, InteractionRequiredAuthErrorMessage.native_account_unavailable.desc);\n    }\n}\n"],"mappings":";;;;;;;AAAA;;;AAGG;AAKH;;AAEG;AACU,IAAAA,qCAAqC,GAAG,CACjD,sBAAsB,EACtB,kBAAkB,EAClB,gBAAgB,C;AAGP,IAAAC,sCAAsC,GAAG,CAClD,cAAc,EACd,mBAAmB,EACnB,cAAc,EACd,uBAAuB,EACvB,kBAAkB,C;AAGtB;;AAEG;AACU,IAAAC,mCAAmC,GAAG;EAC/CC,kBAAkB,EAAE;IAChBC,IAAI,EAAE,iBAAiB;IACvBC,IAAI,EAAE;EACT;EACDC,0BAA0B,EAAE;IACxBF,IAAI,EAAE,4BAA4B;IAClCC,IAAI,EAAE;EACT;;AAGL;;AAEG;AACH,IAAAE,4BAAA,0BAAAC,MAAA;EAAkDC,SAAS,CAAAF,4BAAA,EAAAC,MAAA;EAsBvD,SAAAD,6BAAYG,SAAkB,EAAEC,YAAqB,EAAEC,QAAiB,EAAEC,SAAkB,EAAEC,OAAgB,EAAEC,aAAsB,EAAEC,MAAe;IAAvJ,IAAAC,KAAA,GACIT,MAAA,CAAAU,IAAA,OAAMR,SAAS,EAAEC,YAAY,EAAEC,QAAQ,CAAC,IAQ3C;IAPGO,MAAM,CAACC,cAAc,CAACH,KAAI,EAAEV,4BAA4B,CAACc,SAAS,CAAC;IAEnEJ,KAAI,CAACJ,SAAS,GAAGA,SAAS,IAAIS,SAAS,CAACC,YAAY;IACpDN,KAAI,CAACH,OAAO,GAAGA,OAAO,IAAIQ,SAAS,CAACC,YAAY;IAChDN,KAAI,CAACF,aAAa,GAAGA,aAAa,IAAIO,SAAS,CAACC,YAAY;IAC5DN,KAAI,CAACD,MAAM,GAAGA,MAAM,IAAIM,SAAS,CAACC,YAAY;IAC9CN,KAAI,CAACO,IAAI,GAAG,8BAA8B;;;EAG9C;;;;;AAKG;EACIjB,4BAAA,CAAAkB,0BAA0B,GAAjC,UAAkCf,SAAkB,EAAEgB,WAAoB,EAAEd,QAAiB;IACzF,IAAMe,8BAA8B,GAAG,CAAC,CAACjB,SAAS,IAAIV,qCAAqC,CAAC4B,OAAO,CAAClB,SAAS,CAAC,GAAG,CAAC,CAAC;IACnH,IAAMmB,6BAA6B,GAAG,CAAC,CAACjB,QAAQ,IAAIX,sCAAsC,CAAC2B,OAAO,CAAChB,QAAQ,CAAC,GAAG,CAAC,CAAC;IACjH,IAAMkB,8BAA8B,GAAG,CAAC,CAACJ,WAAW,IAAI1B,qCAAqC,CAAC+B,IAAI,CAAC,UAACC,WAAW;MAC3G,OAAON,WAAW,CAACE,OAAO,CAACI,WAAW,CAAC,GAAG,CAAC,CAAC;IAChD,CAAC,CAAC;IAEF,OAAOL,8BAA8B,IAAIG,8BAA8B,IAAID,6BAA6B;GAC3G;EAED;;AAEG;EACItB,4BAAA,CAAA0B,wBAAwB,GAA/B;IACI,OAAO,IAAI1B,4BAA4B,CAACL,mCAAmC,CAACC,kBAAkB,CAACC,IAAI,EAAEF,mCAAmC,CAACC,kBAAkB,CAACE,IAAI,CAAC;GACpK;EAED;;;AAGG;EACIE,4BAAA,CAAA2B,mCAAmC,GAA1C;IACI,OAAO,IAAI3B,4BAA4B,CAACL,mCAAmC,CAACI,0BAA0B,CAACF,IAAI,EAAEF,mCAAmC,CAACI,0BAA0B,CAACD,IAAI,CAAC;GACpL;EACL,OAACE,4BAAA;AAAD,CA/DA,CAAkD4B,SAAS,CA+D1D"},"metadata":{},"sourceType":"module"}