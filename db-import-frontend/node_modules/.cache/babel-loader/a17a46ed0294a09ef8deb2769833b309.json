{"ast":null,"code":"\"use strict\";\n\nvar _regeneratorRuntime = require(\"/Users/aribraun/Desktop/db-import/node_modules/@babel/runtime/helpers/regeneratorRuntime.js\").default;\nvar _asyncToGenerator = require(\"/Users/aribraun/Desktop/db-import/node_modules/@babel/runtime/helpers/asyncToGenerator.js\").default;\nvar _classCallCheck = require(\"/Users/aribraun/Desktop/db-import/node_modules/@babel/runtime/helpers/classCallCheck.js\").default;\nvar _createClass = require(\"/Users/aribraun/Desktop/db-import/node_modules/@babel/runtime/helpers/createClass.js\").default;\nvar _defineProperty = require(\"/Users/aribraun/Desktop/db-import/node_modules/@babel/runtime/helpers/defineProperty.js\").default;\nvar _awaitAsyncGenerator = require(\"/Users/aribraun/Desktop/db-import/node_modules/@babel/runtime/helpers/awaitAsyncGenerator.js\").default;\nvar _wrapAsyncGenerator = require(\"/Users/aribraun/Desktop/db-import/node_modules/@babel/runtime/helpers/wrapAsyncGenerator.js\").default;\nvar _tokenParsers;\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\nvar _token = require(\"./token\");\nvar _colmetadataTokenParser = _interopRequireDefault(require(\"./colmetadata-token-parser\"));\nvar _doneTokenParser = require(\"./done-token-parser\");\nvar _envChangeTokenParser = _interopRequireDefault(require(\"./env-change-token-parser\"));\nvar _infoerrorTokenParser = require(\"./infoerror-token-parser\");\nvar _fedauthInfoParser = _interopRequireDefault(require(\"./fedauth-info-parser\"));\nvar _featureExtAckParser = _interopRequireDefault(require(\"./feature-ext-ack-parser\"));\nvar _loginackTokenParser = _interopRequireDefault(require(\"./loginack-token-parser\"));\nvar _orderTokenParser = _interopRequireDefault(require(\"./order-token-parser\"));\nvar _returnstatusTokenParser = _interopRequireDefault(require(\"./returnstatus-token-parser\"));\nvar _returnvalueTokenParser = _interopRequireDefault(require(\"./returnvalue-token-parser\"));\nvar _rowTokenParser = _interopRequireDefault(require(\"./row-token-parser\"));\nvar _nbcrowTokenParser = _interopRequireDefault(require(\"./nbcrow-token-parser\"));\nvar _sspiTokenParser = _interopRequireDefault(require(\"./sspi-token-parser\"));\nfunction _interopRequireDefault(obj) {\n  return obj && obj.__esModule ? obj : {\n    default: obj\n  };\n}\nvar tokenParsers = (_tokenParsers = {}, _defineProperty(_tokenParsers, _token.TYPE.DONE, _doneTokenParser.doneParser), _defineProperty(_tokenParsers, _token.TYPE.DONEINPROC, _doneTokenParser.doneInProcParser), _defineProperty(_tokenParsers, _token.TYPE.DONEPROC, _doneTokenParser.doneProcParser), _defineProperty(_tokenParsers, _token.TYPE.ENVCHANGE, _envChangeTokenParser.default), _defineProperty(_tokenParsers, _token.TYPE.ERROR, _infoerrorTokenParser.errorParser), _defineProperty(_tokenParsers, _token.TYPE.FEDAUTHINFO, _fedauthInfoParser.default), _defineProperty(_tokenParsers, _token.TYPE.FEATUREEXTACK, _featureExtAckParser.default), _defineProperty(_tokenParsers, _token.TYPE.INFO, _infoerrorTokenParser.infoParser), _defineProperty(_tokenParsers, _token.TYPE.LOGINACK, _loginackTokenParser.default), _defineProperty(_tokenParsers, _token.TYPE.ORDER, _orderTokenParser.default), _defineProperty(_tokenParsers, _token.TYPE.RETURNSTATUS, _returnstatusTokenParser.default), _defineProperty(_tokenParsers, _token.TYPE.RETURNVALUE, _returnvalueTokenParser.default), _defineProperty(_tokenParsers, _token.TYPE.SSPI, _sspiTokenParser.default), _tokenParsers);\nvar StreamBuffer = /*#__PURE__*/function () {\n  function StreamBuffer(iterable) {\n    _classCallCheck(this, StreamBuffer);\n    this.iterator = void 0;\n    this.buffer = void 0;\n    this.position = void 0;\n    this.iterator = (iterable[Symbol.asyncIterator] || iterable[Symbol.iterator]).call(iterable);\n    this.buffer = Buffer.alloc(0);\n    this.position = 0;\n  }\n  _createClass(StreamBuffer, [{\n    key: \"waitForChunk\",\n    value: function () {\n      var _waitForChunk = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee() {\n        var result;\n        return _regeneratorRuntime().wrap(function _callee$(_context) {\n          while (1) switch (_context.prev = _context.next) {\n            case 0:\n              _context.next = 2;\n              return this.iterator.next();\n            case 2:\n              result = _context.sent;\n              if (!result.done) {\n                _context.next = 5;\n                break;\n              }\n              throw new Error('unexpected end of data');\n            case 5:\n              if (this.position === this.buffer.length) {\n                this.buffer = result.value;\n              } else {\n                this.buffer = Buffer.concat([this.buffer.slice(this.position), result.value]);\n              }\n              this.position = 0;\n            case 7:\n            case \"end\":\n              return _context.stop();\n          }\n        }, _callee, this);\n      }));\n      function waitForChunk() {\n        return _waitForChunk.apply(this, arguments);\n      }\n      return waitForChunk;\n    }()\n  }]);\n  return StreamBuffer;\n}();\nvar Parser = /*#__PURE__*/function () {\n  function Parser(streamBuffer, debug, options) {\n    _classCallCheck(this, Parser);\n    this.debug = void 0;\n    this.colMetadata = void 0;\n    this.options = void 0;\n    this.suspended = void 0;\n    this.next = void 0;\n    this.streamBuffer = void 0;\n    this.debug = debug;\n    this.colMetadata = [];\n    this.options = options;\n    this.streamBuffer = streamBuffer;\n    this.suspended = false;\n    this.next = undefined;\n  }\n  _createClass(Parser, [{\n    key: \"buffer\",\n    get: function get() {\n      return this.streamBuffer.buffer;\n    }\n  }, {\n    key: \"position\",\n    get: function get() {\n      return this.streamBuffer.position;\n    },\n    set: function set(value) {\n      this.streamBuffer.position = value;\n    }\n  }, {\n    key: \"suspend\",\n    value: function suspend(next) {\n      this.suspended = true;\n      this.next = next;\n    }\n  }, {\n    key: \"awaitData\",\n    value: function awaitData(length, callback) {\n      var _this = this;\n      if (this.position + length <= this.buffer.length) {\n        callback();\n      } else {\n        this.suspend(function () {\n          _this.awaitData(length, callback);\n        });\n      }\n    }\n  }, {\n    key: \"readInt8\",\n    value: function readInt8(callback) {\n      var _this2 = this;\n      this.awaitData(1, function () {\n        var data = _this2.buffer.readInt8(_this2.position);\n        _this2.position += 1;\n        callback(data);\n      });\n    }\n  }, {\n    key: \"readUInt8\",\n    value: function readUInt8(callback) {\n      var _this3 = this;\n      this.awaitData(1, function () {\n        var data = _this3.buffer.readUInt8(_this3.position);\n        _this3.position += 1;\n        callback(data);\n      });\n    }\n  }, {\n    key: \"readInt16LE\",\n    value: function readInt16LE(callback) {\n      var _this4 = this;\n      this.awaitData(2, function () {\n        var data = _this4.buffer.readInt16LE(_this4.position);\n        _this4.position += 2;\n        callback(data);\n      });\n    }\n  }, {\n    key: \"readInt16BE\",\n    value: function readInt16BE(callback) {\n      var _this5 = this;\n      this.awaitData(2, function () {\n        var data = _this5.buffer.readInt16BE(_this5.position);\n        _this5.position += 2;\n        callback(data);\n      });\n    }\n  }, {\n    key: \"readUInt16LE\",\n    value: function readUInt16LE(callback) {\n      var _this6 = this;\n      this.awaitData(2, function () {\n        var data = _this6.buffer.readUInt16LE(_this6.position);\n        _this6.position += 2;\n        callback(data);\n      });\n    }\n  }, {\n    key: \"readUInt16BE\",\n    value: function readUInt16BE(callback) {\n      var _this7 = this;\n      this.awaitData(2, function () {\n        var data = _this7.buffer.readUInt16BE(_this7.position);\n        _this7.position += 2;\n        callback(data);\n      });\n    }\n  }, {\n    key: \"readInt32LE\",\n    value: function readInt32LE(callback) {\n      var _this8 = this;\n      this.awaitData(4, function () {\n        var data = _this8.buffer.readInt32LE(_this8.position);\n        _this8.position += 4;\n        callback(data);\n      });\n    }\n  }, {\n    key: \"readInt32BE\",\n    value: function readInt32BE(callback) {\n      var _this9 = this;\n      this.awaitData(4, function () {\n        var data = _this9.buffer.readInt32BE(_this9.position);\n        _this9.position += 4;\n        callback(data);\n      });\n    }\n  }, {\n    key: \"readUInt32LE\",\n    value: function readUInt32LE(callback) {\n      var _this10 = this;\n      this.awaitData(4, function () {\n        var data = _this10.buffer.readUInt32LE(_this10.position);\n        _this10.position += 4;\n        callback(data);\n      });\n    }\n  }, {\n    key: \"readUInt32BE\",\n    value: function readUInt32BE(callback) {\n      var _this11 = this;\n      this.awaitData(4, function () {\n        var data = _this11.buffer.readUInt32BE(_this11.position);\n        _this11.position += 4;\n        callback(data);\n      });\n    }\n  }, {\n    key: \"readBigInt64LE\",\n    value: function readBigInt64LE(callback) {\n      var _this12 = this;\n      this.awaitData(8, function () {\n        var data = _this12.buffer.readBigInt64LE(_this12.position);\n        _this12.position += 8;\n        callback(data);\n      });\n    }\n  }, {\n    key: \"readInt64LE\",\n    value: function readInt64LE(callback) {\n      var _this13 = this;\n      this.awaitData(8, function () {\n        var data = Math.pow(2, 32) * _this13.buffer.readInt32LE(_this13.position + 4) + ((_this13.buffer[_this13.position + 4] & 0x80) === 0x80 ? 1 : -1) * _this13.buffer.readUInt32LE(_this13.position);\n        _this13.position += 8;\n        callback(data);\n      });\n    }\n  }, {\n    key: \"readInt64BE\",\n    value: function readInt64BE(callback) {\n      var _this14 = this;\n      this.awaitData(8, function () {\n        var data = Math.pow(2, 32) * _this14.buffer.readInt32BE(_this14.position) + ((_this14.buffer[_this14.position] & 0x80) === 0x80 ? 1 : -1) * _this14.buffer.readUInt32BE(_this14.position + 4);\n        _this14.position += 8;\n        callback(data);\n      });\n    }\n  }, {\n    key: \"readBigUInt64LE\",\n    value: function readBigUInt64LE(callback) {\n      var _this15 = this;\n      this.awaitData(8, function () {\n        var data = _this15.buffer.readBigUInt64LE(_this15.position);\n        _this15.position += 8;\n        callback(data);\n      });\n    }\n  }, {\n    key: \"readUInt64LE\",\n    value: function readUInt64LE(callback) {\n      var _this16 = this;\n      this.awaitData(8, function () {\n        var data = Math.pow(2, 32) * _this16.buffer.readUInt32LE(_this16.position + 4) + _this16.buffer.readUInt32LE(_this16.position);\n        _this16.position += 8;\n        callback(data);\n      });\n    }\n  }, {\n    key: \"readUInt64BE\",\n    value: function readUInt64BE(callback) {\n      var _this17 = this;\n      this.awaitData(8, function () {\n        var data = Math.pow(2, 32) * _this17.buffer.readUInt32BE(_this17.position) + _this17.buffer.readUInt32BE(_this17.position + 4);\n        _this17.position += 8;\n        callback(data);\n      });\n    }\n  }, {\n    key: \"readFloatLE\",\n    value: function readFloatLE(callback) {\n      var _this18 = this;\n      this.awaitData(4, function () {\n        var data = _this18.buffer.readFloatLE(_this18.position);\n        _this18.position += 4;\n        callback(data);\n      });\n    }\n  }, {\n    key: \"readFloatBE\",\n    value: function readFloatBE(callback) {\n      var _this19 = this;\n      this.awaitData(4, function () {\n        var data = _this19.buffer.readFloatBE(_this19.position);\n        _this19.position += 4;\n        callback(data);\n      });\n    }\n  }, {\n    key: \"readDoubleLE\",\n    value: function readDoubleLE(callback) {\n      var _this20 = this;\n      this.awaitData(8, function () {\n        var data = _this20.buffer.readDoubleLE(_this20.position);\n        _this20.position += 8;\n        callback(data);\n      });\n    }\n  }, {\n    key: \"readDoubleBE\",\n    value: function readDoubleBE(callback) {\n      var _this21 = this;\n      this.awaitData(8, function () {\n        var data = _this21.buffer.readDoubleBE(_this21.position);\n        _this21.position += 8;\n        callback(data);\n      });\n    }\n  }, {\n    key: \"readUInt24LE\",\n    value: function readUInt24LE(callback) {\n      var _this22 = this;\n      this.awaitData(3, function () {\n        var low = _this22.buffer.readUInt16LE(_this22.position);\n        var high = _this22.buffer.readUInt8(_this22.position + 2);\n        _this22.position += 3;\n        callback(low | high << 16);\n      });\n    }\n  }, {\n    key: \"readUInt40LE\",\n    value: function readUInt40LE(callback) {\n      var _this23 = this;\n      this.awaitData(5, function () {\n        var low = _this23.buffer.readUInt32LE(_this23.position);\n        var high = _this23.buffer.readUInt8(_this23.position + 4);\n        _this23.position += 5;\n        callback(0x100000000 * high + low);\n      });\n    }\n  }, {\n    key: \"readUNumeric64LE\",\n    value: function readUNumeric64LE(callback) {\n      var _this24 = this;\n      this.awaitData(8, function () {\n        var low = _this24.buffer.readUInt32LE(_this24.position);\n        var high = _this24.buffer.readUInt32LE(_this24.position + 4);\n        _this24.position += 8;\n        callback(0x100000000 * high + low);\n      });\n    }\n  }, {\n    key: \"readUNumeric96LE\",\n    value: function readUNumeric96LE(callback) {\n      var _this25 = this;\n      this.awaitData(12, function () {\n        var dword1 = _this25.buffer.readUInt32LE(_this25.position);\n        var dword2 = _this25.buffer.readUInt32LE(_this25.position + 4);\n        var dword3 = _this25.buffer.readUInt32LE(_this25.position + 8);\n        _this25.position += 12;\n        callback(dword1 + 0x100000000 * dword2 + 0x100000000 * 0x100000000 * dword3);\n      });\n    }\n  }, {\n    key: \"readUNumeric128LE\",\n    value: function readUNumeric128LE(callback) {\n      var _this26 = this;\n      this.awaitData(16, function () {\n        var dword1 = _this26.buffer.readUInt32LE(_this26.position);\n        var dword2 = _this26.buffer.readUInt32LE(_this26.position + 4);\n        var dword3 = _this26.buffer.readUInt32LE(_this26.position + 8);\n        var dword4 = _this26.buffer.readUInt32LE(_this26.position + 12);\n        _this26.position += 16;\n        callback(dword1 + 0x100000000 * dword2 + 0x100000000 * 0x100000000 * dword3 + 0x100000000 * 0x100000000 * 0x100000000 * dword4);\n      });\n    } // Variable length data\n  }, {\n    key: \"readBuffer\",\n    value: function readBuffer(length, callback) {\n      var _this27 = this;\n      this.awaitData(length, function () {\n        var data = _this27.buffer.slice(_this27.position, _this27.position + length);\n        _this27.position += length;\n        callback(data);\n      });\n    } // Read a Unicode String (BVARCHAR)\n  }, {\n    key: \"readBVarChar\",\n    value: function readBVarChar(callback) {\n      var _this28 = this;\n      this.readUInt8(function (length) {\n        _this28.readBuffer(length * 2, function (data) {\n          callback(data.toString('ucs2'));\n        });\n      });\n    } // Read a Unicode String (USVARCHAR)\n  }, {\n    key: \"readUsVarChar\",\n    value: function readUsVarChar(callback) {\n      var _this29 = this;\n      this.readUInt16LE(function (length) {\n        _this29.readBuffer(length * 2, function (data) {\n          callback(data.toString('ucs2'));\n        });\n      });\n    } // Read binary data (BVARBYTE)\n  }, {\n    key: \"readBVarByte\",\n    value: function readBVarByte(callback) {\n      var _this30 = this;\n      this.readUInt8(function (length) {\n        _this30.readBuffer(length, callback);\n      });\n    } // Read binary data (USVARBYTE)\n  }, {\n    key: \"readUsVarByte\",\n    value: function readUsVarByte(callback) {\n      var _this31 = this;\n      this.readUInt16LE(function (length) {\n        _this31.readBuffer(length, callback);\n      });\n    }\n  }], [{\n    key: \"parseTokens\",\n    value: function parseTokens(iterable, debug, options) {\n      var colMetadata = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : [];\n      return _wrapAsyncGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee2() {\n        var token, onDoneParsing, streamBuffer, parser, next, type, _token2;\n        return _regeneratorRuntime().wrap(function _callee2$(_context2) {\n          while (1) switch (_context2.prev = _context2.next) {\n            case 0:\n              onDoneParsing = function onDoneParsing(t) {\n                token = t;\n              };\n              streamBuffer = new StreamBuffer(iterable);\n              parser = new Parser(streamBuffer, debug, options);\n              parser.colMetadata = colMetadata;\n            case 4:\n              if (!true) {\n                _context2.next = 58;\n                break;\n              }\n              _context2.prev = 5;\n              _context2.next = 8;\n              return _awaitAsyncGenerator(streamBuffer.waitForChunk());\n            case 8:\n              _context2.next = 15;\n              break;\n            case 10:\n              _context2.prev = 10;\n              _context2.t0 = _context2[\"catch\"](5);\n              if (!(streamBuffer.position === streamBuffer.buffer.length)) {\n                _context2.next = 14;\n                break;\n              }\n              return _context2.abrupt(\"return\");\n            case 14:\n              throw _context2.t0;\n            case 15:\n              if (!parser.suspended) {\n                _context2.next = 23;\n                break;\n              }\n              // Unsuspend and continue from where ever we left off.\n              parser.suspended = false;\n              next = parser.next;\n              next(); // Check if a new token was parsed after unsuspension.\n              if (!(!parser.suspended && token)) {\n                _context2.next = 23;\n                break;\n              }\n              if (token instanceof _token.ColMetadataToken) {\n                parser.colMetadata = token.columns;\n              }\n              _context2.next = 23;\n              return token;\n            case 23:\n              if (!(!parser.suspended && parser.position + 1 <= parser.buffer.length)) {\n                _context2.next = 56;\n                break;\n              }\n              type = parser.buffer.readUInt8(parser.position);\n              parser.position += 1;\n              if (!(type === _token.TYPE.COLMETADATA)) {\n                _context2.next = 35;\n                break;\n              }\n              _context2.next = 29;\n              return _awaitAsyncGenerator((0, _colmetadataTokenParser.default)(parser));\n            case 29:\n              _token2 = _context2.sent;\n              parser.colMetadata = _token2.columns;\n              _context2.next = 33;\n              return _token2;\n            case 33:\n              _context2.next = 54;\n              break;\n            case 35:\n              if (!(type === _token.TYPE.ROW)) {\n                _context2.next = 40;\n                break;\n              }\n              _context2.next = 38;\n              return (0, _rowTokenParser.default)(parser);\n            case 38:\n              _context2.next = 54;\n              break;\n            case 40:\n              if (!(type === _token.TYPE.NBCROW)) {\n                _context2.next = 45;\n                break;\n              }\n              _context2.next = 43;\n              return (0, _nbcrowTokenParser.default)(parser);\n            case 43:\n              _context2.next = 54;\n              break;\n            case 45:\n              if (!tokenParsers[type]) {\n                _context2.next = 53;\n                break;\n              }\n              tokenParsers[type](parser, parser.options, onDoneParsing); // Check if a new token was parsed after unsuspension.\n              if (!(!parser.suspended && token)) {\n                _context2.next = 51;\n                break;\n              }\n              if (token instanceof _token.ColMetadataToken) {\n                parser.colMetadata = token.columns;\n              }\n              _context2.next = 51;\n              return token;\n            case 51:\n              _context2.next = 54;\n              break;\n            case 53:\n              throw new Error('Unknown type: ' + type);\n            case 54:\n              _context2.next = 23;\n              break;\n            case 56:\n              _context2.next = 4;\n              break;\n            case 58:\n            case \"end\":\n              return _context2.stop();\n          }\n        }, _callee2, null, [[5, 10]]);\n      }))();\n    }\n  }]);\n  return Parser;\n}();\nvar _default = Parser;\nexports.default = _default;\nmodule.exports = Parser;","map":{"version":3,"names":["_token","require","_colmetadataTokenParser","_interopRequireDefault","_doneTokenParser","_envChangeTokenParser","_infoerrorTokenParser","_fedauthInfoParser","_featureExtAckParser","_loginackTokenParser","_orderTokenParser","_returnstatusTokenParser","_returnvalueTokenParser","_rowTokenParser","_nbcrowTokenParser","_sspiTokenParser","tokenParsers","_tokenParsers","_defineProperty","TYPE","DONE","doneParser","DONEINPROC","doneInProcParser","DONEPROC","doneProcParser","ENVCHANGE","default","ERROR","errorParser","FEDAUTHINFO","FEATUREEXTACK","INFO","infoParser","LOGINACK","ORDER","RETURNSTATUS","RETURNVALUE","SSPI","StreamBuffer","iterable","_classCallCheck","iterator","buffer","position","Symbol","asyncIterator","call","Buffer","alloc","_createClass","key","value","_waitForChunk","_asyncToGenerator","_regeneratorRuntime","mark","_callee","result","wrap","_callee$","_context","prev","next","sent","done","Error","length","concat","slice","stop","waitForChunk","apply","arguments","Parser","streamBuffer","debug","options","colMetadata","suspended","undefined","get","set","suspend","awaitData","callback","_this","readInt8","_this2","data","readUInt8","_this3","readInt16LE","_this4","readInt16BE","_this5","readUInt16LE","_this6","readUInt16BE","_this7","readInt32LE","_this8","readInt32BE","_this9","readUInt32LE","_this10","readUInt32BE","_this11","readBigInt64LE","_this12","readInt64LE","_this13","Math","pow","readInt64BE","_this14","readBigUInt64LE","_this15","readUInt64LE","_this16","readUInt64BE","_this17","readFloatLE","_this18","readFloatBE","_this19","readDoubleLE","_this20","readDoubleBE","_this21","readUInt24LE","_this22","low","high","readUInt40LE","_this23","readUNumeric64LE","_this24","readUNumeric96LE","_this25","dword1","dword2","dword3","readUNumeric128LE","_this26","dword4","readBuffer","_this27","readBVarChar","_this28","toString","readUsVarChar","_this29","readBVarByte","_this30","readUsVarByte","_this31","parseTokens","_wrapAsyncGenerator","_callee2","token","onDoneParsing","parser","type","_token2","_callee2$","_context2","t","_awaitAsyncGenerator","t0","abrupt","ColMetadataToken","columns","COLMETADATA","ROW","NBCROW","module","exports"],"sources":["../../src/token/stream-parser.ts"],"sourcesContent":["import Debug from '../debug';\nimport { InternalConnectionOptions } from '../connection';\n\nimport { TYPE, Token, ColMetadataToken } from './token';\n\nimport colMetadataParser, { ColumnMetadata } from './colmetadata-token-parser';\nimport { doneParser, doneInProcParser, doneProcParser } from './done-token-parser';\nimport envChangeParser from './env-change-token-parser';\nimport { errorParser, infoParser } from './infoerror-token-parser';\nimport fedAuthInfoParser from './fedauth-info-parser';\nimport featureExtAckParser from './feature-ext-ack-parser';\nimport loginAckParser from './loginack-token-parser';\nimport orderParser from './order-token-parser';\nimport returnStatusParser from './returnstatus-token-parser';\nimport returnValueParser from './returnvalue-token-parser';\nimport rowParser from './row-token-parser';\nimport nbcRowParser from './nbcrow-token-parser';\nimport sspiParser from './sspi-token-parser';\n\nconst tokenParsers = {\n  [TYPE.DONE]: doneParser,\n  [TYPE.DONEINPROC]: doneInProcParser,\n  [TYPE.DONEPROC]: doneProcParser,\n  [TYPE.ENVCHANGE]: envChangeParser,\n  [TYPE.ERROR]: errorParser,\n  [TYPE.FEDAUTHINFO]: fedAuthInfoParser,\n  [TYPE.FEATUREEXTACK]: featureExtAckParser,\n  [TYPE.INFO]: infoParser,\n  [TYPE.LOGINACK]: loginAckParser,\n  [TYPE.ORDER]: orderParser,\n  [TYPE.RETURNSTATUS]: returnStatusParser,\n  [TYPE.RETURNVALUE]: returnValueParser,\n  [TYPE.SSPI]: sspiParser\n};\n\nexport type ParserOptions = Pick<InternalConnectionOptions, 'useUTC' | 'lowerCaseGuids' | 'tdsVersion' | 'useColumnNames' | 'columnNameReplacer' | 'camelCaseColumns'>;\n\nclass StreamBuffer {\n  iterator: AsyncIterator<Buffer, any, undefined> | Iterator<Buffer, any, undefined>;\n  buffer: Buffer;\n  position: number;\n\n  constructor(iterable: AsyncIterable<Buffer> | Iterable<Buffer>) {\n    this.iterator = ((iterable as AsyncIterable<Buffer>)[Symbol.asyncIterator] || (iterable as Iterable<Buffer>)[Symbol.iterator]).call(iterable);\n\n    this.buffer = Buffer.alloc(0);\n    this.position = 0;\n  }\n\n  async waitForChunk() {\n    const result = await this.iterator.next();\n    if (result.done) {\n      throw new Error('unexpected end of data');\n    }\n\n    if (this.position === this.buffer.length) {\n      this.buffer = result.value;\n    } else {\n      this.buffer = Buffer.concat([this.buffer.slice(this.position), result.value]);\n    }\n    this.position = 0;\n  }\n}\n\nclass Parser {\n  debug: Debug;\n  colMetadata: ColumnMetadata[];\n  options: ParserOptions;\n\n  suspended: boolean;\n  next: (() => void) | undefined;\n  streamBuffer: StreamBuffer;\n\n  static async *parseTokens(iterable: AsyncIterable<Buffer> | Iterable<Buffer>, debug: Debug, options: ParserOptions, colMetadata: ColumnMetadata[] = []) {\n    let token: Token | undefined;\n    const onDoneParsing = (t: Token | undefined) => { token = t; };\n\n    const streamBuffer = new StreamBuffer(iterable);\n\n    const parser = new Parser(streamBuffer, debug, options);\n    parser.colMetadata = colMetadata;\n\n    while (true) {\n      try {\n        await streamBuffer.waitForChunk();\n      } catch (err: unknown) {\n        if (streamBuffer.position === streamBuffer.buffer.length) {\n          return;\n        }\n\n        throw err;\n      }\n\n      if (parser.suspended) {\n        // Unsuspend and continue from where ever we left off.\n        parser.suspended = false;\n        const next = parser.next!;\n\n        next();\n\n        // Check if a new token was parsed after unsuspension.\n        if (!parser.suspended && token) {\n          if (token instanceof ColMetadataToken) {\n            parser.colMetadata = token.columns;\n          }\n\n          yield token;\n        }\n      }\n\n      while (!parser.suspended && parser.position + 1 <= parser.buffer.length) {\n        const type = parser.buffer.readUInt8(parser.position);\n\n        parser.position += 1;\n\n        if (type === TYPE.COLMETADATA) {\n          const token = await colMetadataParser(parser);\n          parser.colMetadata = token.columns;\n          yield token;\n        } else if (type === TYPE.ROW) {\n          yield rowParser(parser);\n        } else if (type === TYPE.NBCROW) {\n          yield nbcRowParser(parser);\n        } else if (tokenParsers[type]) {\n          tokenParsers[type](parser, parser.options, onDoneParsing);\n\n          // Check if a new token was parsed after unsuspension.\n          if (!parser.suspended && token) {\n            if (token instanceof ColMetadataToken) {\n              parser.colMetadata = token.columns;\n            }\n            yield token;\n          }\n        } else {\n          throw new Error('Unknown type: ' + type);\n        }\n      }\n    }\n  }\n\n  constructor(streamBuffer: StreamBuffer, debug: Debug, options: ParserOptions) {\n    this.debug = debug;\n    this.colMetadata = [];\n    this.options = options;\n\n    this.streamBuffer = streamBuffer;\n    this.suspended = false;\n    this.next = undefined;\n  }\n\n  get buffer() {\n    return this.streamBuffer.buffer;\n  }\n\n  get position() {\n    return this.streamBuffer.position;\n  }\n\n  set position(value) {\n    this.streamBuffer.position = value;\n  }\n\n  suspend(next: () => void) {\n    this.suspended = true;\n    this.next = next;\n  }\n\n  awaitData(length: number, callback: () => void) {\n    if (this.position + length <= this.buffer.length) {\n      callback();\n    } else {\n      this.suspend(() => {\n        this.awaitData(length, callback);\n      });\n    }\n  }\n\n  readInt8(callback: (data: number) => void) {\n    this.awaitData(1, () => {\n      const data = this.buffer.readInt8(this.position);\n      this.position += 1;\n      callback(data);\n    });\n  }\n\n  readUInt8(callback: (data: number) => void) {\n    this.awaitData(1, () => {\n      const data = this.buffer.readUInt8(this.position);\n      this.position += 1;\n      callback(data);\n    });\n  }\n\n  readInt16LE(callback: (data: number) => void) {\n    this.awaitData(2, () => {\n      const data = this.buffer.readInt16LE(this.position);\n      this.position += 2;\n      callback(data);\n    });\n  }\n\n  readInt16BE(callback: (data: number) => void) {\n    this.awaitData(2, () => {\n      const data = this.buffer.readInt16BE(this.position);\n      this.position += 2;\n      callback(data);\n    });\n  }\n\n  readUInt16LE(callback: (data: number) => void) {\n    this.awaitData(2, () => {\n      const data = this.buffer.readUInt16LE(this.position);\n      this.position += 2;\n      callback(data);\n    });\n  }\n\n  readUInt16BE(callback: (data: number) => void) {\n    this.awaitData(2, () => {\n      const data = this.buffer.readUInt16BE(this.position);\n      this.position += 2;\n      callback(data);\n    });\n  }\n\n  readInt32LE(callback: (data: number) => void) {\n    this.awaitData(4, () => {\n      const data = this.buffer.readInt32LE(this.position);\n      this.position += 4;\n      callback(data);\n    });\n  }\n\n  readInt32BE(callback: (data: number) => void) {\n    this.awaitData(4, () => {\n      const data = this.buffer.readInt32BE(this.position);\n      this.position += 4;\n      callback(data);\n    });\n  }\n\n  readUInt32LE(callback: (data: number) => void) {\n    this.awaitData(4, () => {\n      const data = this.buffer.readUInt32LE(this.position);\n      this.position += 4;\n      callback(data);\n    });\n  }\n\n  readUInt32BE(callback: (data: number) => void) {\n    this.awaitData(4, () => {\n      const data = this.buffer.readUInt32BE(this.position);\n      this.position += 4;\n      callback(data);\n    });\n  }\n\n  readBigInt64LE(callback: (data: bigint) => void) {\n    this.awaitData(8, () => {\n      const data = this.buffer.readBigInt64LE(this.position);\n      this.position += 8;\n      callback(data);\n    });\n  }\n\n  readInt64LE(callback: (data: number) => void) {\n    this.awaitData(8, () => {\n      const data = Math.pow(2, 32) * this.buffer.readInt32LE(this.position + 4) + ((this.buffer[this.position + 4] & 0x80) === 0x80 ? 1 : -1) * this.buffer.readUInt32LE(this.position);\n      this.position += 8;\n      callback(data);\n    });\n  }\n\n  readInt64BE(callback: (data: number) => void) {\n    this.awaitData(8, () => {\n      const data = Math.pow(2, 32) * this.buffer.readInt32BE(this.position) + ((this.buffer[this.position] & 0x80) === 0x80 ? 1 : -1) * this.buffer.readUInt32BE(this.position + 4);\n      this.position += 8;\n      callback(data);\n    });\n  }\n\n  readBigUInt64LE(callback: (data: bigint) => void) {\n    this.awaitData(8, () => {\n      const data = this.buffer.readBigUInt64LE(this.position);\n      this.position += 8;\n      callback(data);\n    });\n  }\n\n  readUInt64LE(callback: (data: number) => void) {\n    this.awaitData(8, () => {\n      const data = Math.pow(2, 32) * this.buffer.readUInt32LE(this.position + 4) + this.buffer.readUInt32LE(this.position);\n      this.position += 8;\n      callback(data);\n    });\n  }\n\n  readUInt64BE(callback: (data: number) => void) {\n    this.awaitData(8, () => {\n      const data = Math.pow(2, 32) * this.buffer.readUInt32BE(this.position) + this.buffer.readUInt32BE(this.position + 4);\n      this.position += 8;\n      callback(data);\n    });\n  }\n\n  readFloatLE(callback: (data: number) => void) {\n    this.awaitData(4, () => {\n      const data = this.buffer.readFloatLE(this.position);\n      this.position += 4;\n      callback(data);\n    });\n  }\n\n  readFloatBE(callback: (data: number) => void) {\n    this.awaitData(4, () => {\n      const data = this.buffer.readFloatBE(this.position);\n      this.position += 4;\n      callback(data);\n    });\n  }\n\n  readDoubleLE(callback: (data: number) => void) {\n    this.awaitData(8, () => {\n      const data = this.buffer.readDoubleLE(this.position);\n      this.position += 8;\n      callback(data);\n    });\n  }\n\n  readDoubleBE(callback: (data: number) => void) {\n    this.awaitData(8, () => {\n      const data = this.buffer.readDoubleBE(this.position);\n      this.position += 8;\n      callback(data);\n    });\n  }\n\n  readUInt24LE(callback: (data: number) => void) {\n    this.awaitData(3, () => {\n      const low = this.buffer.readUInt16LE(this.position);\n      const high = this.buffer.readUInt8(this.position + 2);\n\n      this.position += 3;\n\n      callback(low | (high << 16));\n    });\n  }\n\n  readUInt40LE(callback: (data: number) => void) {\n    this.awaitData(5, () => {\n      const low = this.buffer.readUInt32LE(this.position);\n      const high = this.buffer.readUInt8(this.position + 4);\n\n      this.position += 5;\n\n      callback((0x100000000 * high) + low);\n    });\n  }\n\n  readUNumeric64LE(callback: (data: number) => void) {\n    this.awaitData(8, () => {\n      const low = this.buffer.readUInt32LE(this.position);\n      const high = this.buffer.readUInt32LE(this.position + 4);\n\n      this.position += 8;\n\n      callback((0x100000000 * high) + low);\n    });\n  }\n\n  readUNumeric96LE(callback: (data: number) => void) {\n    this.awaitData(12, () => {\n      const dword1 = this.buffer.readUInt32LE(this.position);\n      const dword2 = this.buffer.readUInt32LE(this.position + 4);\n      const dword3 = this.buffer.readUInt32LE(this.position + 8);\n\n      this.position += 12;\n\n      callback(dword1 + (0x100000000 * dword2) + (0x100000000 * 0x100000000 * dword3));\n    });\n  }\n\n  readUNumeric128LE(callback: (data: number) => void) {\n    this.awaitData(16, () => {\n      const dword1 = this.buffer.readUInt32LE(this.position);\n      const dword2 = this.buffer.readUInt32LE(this.position + 4);\n      const dword3 = this.buffer.readUInt32LE(this.position + 8);\n      const dword4 = this.buffer.readUInt32LE(this.position + 12);\n\n      this.position += 16;\n\n      callback(dword1 + (0x100000000 * dword2) + (0x100000000 * 0x100000000 * dword3) + (0x100000000 * 0x100000000 * 0x100000000 * dword4));\n    });\n  }\n\n  // Variable length data\n\n  readBuffer(length: number, callback: (data: Buffer) => void) {\n    this.awaitData(length, () => {\n      const data = this.buffer.slice(this.position, this.position + length);\n      this.position += length;\n      callback(data);\n    });\n  }\n\n  // Read a Unicode String (BVARCHAR)\n  readBVarChar(callback: (data: string) => void) {\n    this.readUInt8((length) => {\n      this.readBuffer(length * 2, (data) => {\n        callback(data.toString('ucs2'));\n      });\n    });\n  }\n\n  // Read a Unicode String (USVARCHAR)\n  readUsVarChar(callback: (data: string) => void) {\n    this.readUInt16LE((length) => {\n      this.readBuffer(length * 2, (data) => {\n        callback(data.toString('ucs2'));\n      });\n    });\n  }\n\n  // Read binary data (BVARBYTE)\n  readBVarByte(callback: (data: Buffer) => void) {\n    this.readUInt8((length) => {\n      this.readBuffer(length, callback);\n    });\n  }\n\n  // Read binary data (USVARBYTE)\n  readUsVarByte(callback: (data: Buffer) => void) {\n    this.readUInt16LE((length) => {\n      this.readBuffer(length, callback);\n    });\n  }\n}\n\nexport default Parser;\nmodule.exports = Parser;\n"],"mappings":"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"},"metadata":{},"sourceType":"script"}