{"ast":null,"code":"\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.SQLServerStatementColumnEncryptionSetting = exports.SQLServerEncryptionType = exports.DescribeParameterEncryptionResultSet2 = exports.DescribeParameterEncryptionResultSet1 = void 0;\n// This code is based on the `mssql-jdbc` library published under the conditions of MIT license.\n// Copyright (c) 2019 Microsoft Corporation\nvar SQLServerEncryptionType;\nexports.SQLServerEncryptionType = SQLServerEncryptionType;\n(function (SQLServerEncryptionType) {\n  SQLServerEncryptionType[SQLServerEncryptionType[\"Deterministic\"] = 1] = \"Deterministic\";\n  SQLServerEncryptionType[SQLServerEncryptionType[\"Randomized\"] = 2] = \"Randomized\";\n  SQLServerEncryptionType[SQLServerEncryptionType[\"PlainText\"] = 0] = \"PlainText\";\n})(SQLServerEncryptionType || (exports.SQLServerEncryptionType = SQLServerEncryptionType = {}));\n\n// Fields in the first resultset of \"sp_describe_parameter_encryption\"\n// We expect the server to return the fields in the resultset in the same order as mentioned below.\n// If the server changes the below order, then transparent parameter encryption will break.\nvar DescribeParameterEncryptionResultSet1; // Fields in the second resultset of \"sp_describe_parameter_encryption\"\n// We expect the server to return the fields in the resultset in the same order as mentioned below.\n// If the server changes the below order, then transparent parameter encryption will break.\n\nexports.DescribeParameterEncryptionResultSet1 = DescribeParameterEncryptionResultSet1;\n(function (DescribeParameterEncryptionResultSet1) {\n  DescribeParameterEncryptionResultSet1[DescribeParameterEncryptionResultSet1[\"KeyOrdinal\"] = 0] = \"KeyOrdinal\";\n  DescribeParameterEncryptionResultSet1[DescribeParameterEncryptionResultSet1[\"DbId\"] = 1] = \"DbId\";\n  DescribeParameterEncryptionResultSet1[DescribeParameterEncryptionResultSet1[\"KeyId\"] = 2] = \"KeyId\";\n  DescribeParameterEncryptionResultSet1[DescribeParameterEncryptionResultSet1[\"KeyVersion\"] = 3] = \"KeyVersion\";\n  DescribeParameterEncryptionResultSet1[DescribeParameterEncryptionResultSet1[\"KeyMdVersion\"] = 4] = \"KeyMdVersion\";\n  DescribeParameterEncryptionResultSet1[DescribeParameterEncryptionResultSet1[\"EncryptedKey\"] = 5] = \"EncryptedKey\";\n  DescribeParameterEncryptionResultSet1[DescribeParameterEncryptionResultSet1[\"ProviderName\"] = 6] = \"ProviderName\";\n  DescribeParameterEncryptionResultSet1[DescribeParameterEncryptionResultSet1[\"KeyPath\"] = 7] = \"KeyPath\";\n  DescribeParameterEncryptionResultSet1[DescribeParameterEncryptionResultSet1[\"KeyEncryptionAlgorithm\"] = 8] = \"KeyEncryptionAlgorithm\";\n})(DescribeParameterEncryptionResultSet1 || (exports.DescribeParameterEncryptionResultSet1 = DescribeParameterEncryptionResultSet1 = {}));\nvar DescribeParameterEncryptionResultSet2;\nexports.DescribeParameterEncryptionResultSet2 = DescribeParameterEncryptionResultSet2;\n(function (DescribeParameterEncryptionResultSet2) {\n  DescribeParameterEncryptionResultSet2[DescribeParameterEncryptionResultSet2[\"ParameterOrdinal\"] = 0] = \"ParameterOrdinal\";\n  DescribeParameterEncryptionResultSet2[DescribeParameterEncryptionResultSet2[\"ParameterName\"] = 1] = \"ParameterName\";\n  DescribeParameterEncryptionResultSet2[DescribeParameterEncryptionResultSet2[\"ColumnEncryptionAlgorithm\"] = 2] = \"ColumnEncryptionAlgorithm\";\n  DescribeParameterEncryptionResultSet2[DescribeParameterEncryptionResultSet2[\"ColumnEncrytionType\"] = 3] = \"ColumnEncrytionType\";\n  DescribeParameterEncryptionResultSet2[DescribeParameterEncryptionResultSet2[\"ColumnEncryptionKeyOrdinal\"] = 4] = \"ColumnEncryptionKeyOrdinal\";\n  DescribeParameterEncryptionResultSet2[DescribeParameterEncryptionResultSet2[\"NormalizationRuleVersion\"] = 5] = \"NormalizationRuleVersion\";\n})(DescribeParameterEncryptionResultSet2 || (exports.DescribeParameterEncryptionResultSet2 = DescribeParameterEncryptionResultSet2 = {}));\nvar SQLServerStatementColumnEncryptionSetting;\nexports.SQLServerStatementColumnEncryptionSetting = SQLServerStatementColumnEncryptionSetting;\n(function (SQLServerStatementColumnEncryptionSetting) {\n  SQLServerStatementColumnEncryptionSetting[SQLServerStatementColumnEncryptionSetting[\"UseConnectionSetting\"] = 0] = \"UseConnectionSetting\";\n  SQLServerStatementColumnEncryptionSetting[SQLServerStatementColumnEncryptionSetting[\"Enabled\"] = 1] = \"Enabled\";\n  SQLServerStatementColumnEncryptionSetting[SQLServerStatementColumnEncryptionSetting[\"ResultSetOnly\"] = 2] = \"ResultSetOnly\";\n  SQLServerStatementColumnEncryptionSetting[SQLServerStatementColumnEncryptionSetting[\"Disabled\"] = 3] = \"Disabled\";\n})(SQLServerStatementColumnEncryptionSetting || (exports.SQLServerStatementColumnEncryptionSetting = SQLServerStatementColumnEncryptionSetting = {}));","map":{"version":3,"names":["SQLServerEncryptionType","DescribeParameterEncryptionResultSet1","DescribeParameterEncryptionResultSet2","SQLServerStatementColumnEncryptionSetting"],"sources":["../../src/always-encrypted/types.ts"],"sourcesContent":["// This code is based on the `mssql-jdbc` library published under the conditions of MIT license.\n// Copyright (c) 2019 Microsoft Corporation\n\nimport { CEKEntry } from './cek-entry';\nimport { BaseMetadata } from '../metadata-parser';\n\nexport interface EncryptionKeyInfo {\n  encryptedKey: Buffer;\n  dbId: number;\n  keyId: number;\n  keyVersion: number;\n  mdVersion: Buffer;\n  keyPath: string;\n  keyStoreName: string;\n  algorithmName: string;\n}\n\nexport enum SQLServerEncryptionType {\n  Deterministic = 1,\n  Randomized = 2,\n  PlainText = 0,\n}\n\nexport interface EncryptionAlgorithm {\n  encryptData: (plainText: Buffer) => Buffer;\n  decryptData: (cipherText: Buffer) => Buffer;\n}\n\nexport interface CryptoMetadata {\n  cekEntry?: CEKEntry;\n  cipherAlgorithmId: number;\n  cipherAlgorithmName?: string;\n  normalizationRuleVersion: Buffer;\n  encryptionKeyInfo?: EncryptionKeyInfo;\n  ordinal: number;\n  encryptionType: SQLServerEncryptionType;\n  cipherAlgorithm?: EncryptionAlgorithm;\n  baseTypeInfo?: BaseMetadata;\n}\n\nexport interface HashMap<T> {\n  [hash: string]: T;\n}\n\n\n// Fields in the first resultset of \"sp_describe_parameter_encryption\"\n// We expect the server to return the fields in the resultset in the same order as mentioned below.\n// If the server changes the below order, then transparent parameter encryption will break.\nexport enum DescribeParameterEncryptionResultSet1 {\n  KeyOrdinal,\n  DbId,\n  KeyId,\n  KeyVersion,\n  KeyMdVersion,\n  EncryptedKey,\n  ProviderName,\n  KeyPath,\n  KeyEncryptionAlgorithm\n}\n\n\n// Fields in the second resultset of \"sp_describe_parameter_encryption\"\n// We expect the server to return the fields in the resultset in the same order as mentioned below.\n// If the server changes the below order, then transparent parameter encryption will break.\nexport enum DescribeParameterEncryptionResultSet2 {\n  ParameterOrdinal,\n  ParameterName,\n  ColumnEncryptionAlgorithm,\n  ColumnEncrytionType,\n  ColumnEncryptionKeyOrdinal,\n  NormalizationRuleVersion\n}\n\nexport enum SQLServerStatementColumnEncryptionSetting {\n  /**\n   * if \"Column Encryption Setting=Enabled\" in the connection string, use Enabled. Otherwise, maps to Disabled.\n   */\n  UseConnectionSetting,\n  /**\n   * Enables TCE for the command. Overrides the connection level setting for this command.\n   */\n  Enabled,\n  /**\n   * Parameters will not be encrypted, only the ResultSet will be decrypted. This is an optimization for queries that\n   * do not pass any encrypted input parameters. Overrides the connection level setting for this command.\n   */\n  ResultSetOnly,\n  /**\n   * Disables TCE for the command.Overrides the connection level setting for this command.\n   */\n  Disabled,\n}\n"],"mappings":";;;;;;AAAA;AACA;IAgBYA,uB;;WAAAA,uB;EAAAA,uB,CAAAA,uB;EAAAA,uB,CAAAA,uB;EAAAA,uB,CAAAA,uB;GAAAA,uB,uCAAAA,uB;;AA4BZ;AACA;AACA;IACYC,qC,EAaZ;AACA;AACA;;;WAfYA,qC;EAAAA,qC,CAAAA,qC;EAAAA,qC,CAAAA,qC;EAAAA,qC,CAAAA,qC;EAAAA,qC,CAAAA,qC;EAAAA,qC,CAAAA,qC;EAAAA,qC,CAAAA,qC;EAAAA,qC,CAAAA,qC;EAAAA,qC,CAAAA,qC;EAAAA,qC,CAAAA,qC;GAAAA,qC,qDAAAA,qC;IAgBAC,qC;;WAAAA,qC;EAAAA,qC,CAAAA,qC;EAAAA,qC,CAAAA,qC;EAAAA,qC,CAAAA,qC;EAAAA,qC,CAAAA,qC;EAAAA,qC,CAAAA,qC;EAAAA,qC,CAAAA,qC;GAAAA,qC,qDAAAA,qC;IASAC,yC;;WAAAA,yC;EAAAA,yC,CAAAA,yC;EAAAA,yC,CAAAA,yC;EAAAA,yC,CAAAA,yC;EAAAA,yC,CAAAA,yC;GAAAA,yC,yDAAAA,yC"},"metadata":{},"sourceType":"script"}