{"ast":null,"code":"import _regeneratorRuntime from \"/Users/aribraun/Desktop/db-import/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";\nimport _asyncToGenerator from \"/Users/aribraun/Desktop/db-import/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";\nimport _classCallCheck from \"/Users/aribraun/Desktop/db-import/node_modules/@babel/runtime/helpers/esm/classCallCheck.js\";\nimport _createClass from \"/Users/aribraun/Desktop/db-import/node_modules/@babel/runtime/helpers/esm/createClass.js\";\nimport _inherits from \"/Users/aribraun/Desktop/db-import/node_modules/@babel/runtime/helpers/esm/inherits.js\";\nimport _createSuper from \"/Users/aribraun/Desktop/db-import/node_modules/@babel/runtime/helpers/esm/createSuper.js\";\n// Copyright (c) Microsoft Corporation.\n// Licensed under the MIT license.\nimport * as msalBrowser from \"@azure/msal-browser\";\nimport { AuthenticationRequiredError } from \"../../errors\";\nimport { defaultLoggerCallback, msalToPublic, publicToMsal } from \"../utils\";\nimport { MsalBrowser } from \"./msalBrowserCommon\";\n// We keep a copy of the redirect hash.\nvar redirectHash = self.location.hash;\n/**\n * Uses MSAL Browser 2.X for browser authentication,\n * which uses the [Auth Code Flow](https://docs.microsoft.com/en-us/azure/active-directory/develop/v2-oauth2-auth-code-flow).\n * @internal\n */\nexport var MSALAuthCode = /*#__PURE__*/function (_MsalBrowser) {\n  _inherits(MSALAuthCode, _MsalBrowser);\n  var _super = _createSuper(MSALAuthCode);\n  /**\n   * Sets up an MSAL object based on the given parameters.\n   * MSAL with Auth Code allows sending a previously obtained `authenticationRecord` through the optional parameters,\n   * which is set to be the active account.\n   * @param options - Parameters necessary and otherwise used to create the MSAL object.\n   */\n  function MSALAuthCode(options) {\n    var _this;\n    _classCallCheck(this, MSALAuthCode);\n    _this = _super.call(this, options);\n    _this.loginHint = options.loginHint;\n    _this.msalConfig.cache = {\n      cacheLocation: \"sessionStorage\",\n      storeAuthStateInCookie: true // Set to true to improve the experience on IE11 and Edge.\n    };\n\n    _this.msalConfig.system = {\n      loggerOptions: {\n        loggerCallback: defaultLoggerCallback(_this.logger, \"Browser\")\n      }\n    };\n    // Preparing the MSAL application.\n    _this.app = new msalBrowser.PublicClientApplication(_this.msalConfig);\n    if (_this.account) {\n      _this.app.setActiveAccount(publicToMsal(_this.account));\n    }\n    return _this;\n  }\n  /**\n   * Loads the account based on the result of the authentication.\n   * If no result was received, tries to load the account from the cache.\n   * @param result - Result object received from MSAL.\n   */\n  _createClass(MSALAuthCode, [{\n    key: \"handleBrowserResult\",\n    value: function () {\n      var _handleBrowserResult = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee(result) {\n        var activeAccount, accounts, account;\n        return _regeneratorRuntime().wrap(function _callee$(_context) {\n          while (1) switch (_context.prev = _context.next) {\n            case 0:\n              _context.prev = 0;\n              if (!(result && result.account)) {\n                _context.next = 5;\n                break;\n              }\n              this.logger.info(\"MSAL Browser V2 authentication successful.\");\n              this.app.setActiveAccount(result.account);\n              return _context.abrupt(\"return\", msalToPublic(this.clientId, result.account));\n            case 5:\n              _context.next = 7;\n              return this.app.getActiveAccount();\n            case 7:\n              activeAccount = _context.sent;\n              if (!activeAccount) {\n                _context.next = 10;\n                break;\n              }\n              return _context.abrupt(\"return\", msalToPublic(this.clientId, activeAccount));\n            case 10:\n              // If we don't have an active account, we try to activate it from all the already loaded accounts.\n              accounts = this.app.getAllAccounts();\n              if (!(accounts.length > 1)) {\n                _context.next = 16;\n                break;\n              }\n              // If there's more than one account in memory, we force the user to authenticate again.\n              // At this point we can't identify which account should this credential work with,\n              // since at this point the user won't have provided enough information.\n              // We log a message in case that helps.\n              this.logger.info(\"More than one account was found authenticated for this Client ID and Tenant ID.\\nHowever, no \\\"authenticationRecord\\\" has been provided for this credential,\\ntherefore we're unable to pick between these accounts.\\nA new login attempt will be requested, to ensure the correct account is picked.\\nTo work with multiple accounts for the same Client ID and Tenant ID, please provide an \\\"authenticationRecord\\\" when initializing \\\"InteractiveBrowserCredential\\\".\");\n              // To safely trigger a new login, we're also ensuring the local cache is cleared up for this MSAL object.\n              // However, we want to avoid kicking the user out of their authentication on the Azure side.\n              // We do this by calling to logout while specifying a `onRedirectNavigate` that returns false.\n              _context.next = 15;\n              return this.app.logout({\n                onRedirectNavigate: function onRedirectNavigate() {\n                  return false;\n                }\n              });\n            case 15:\n              return _context.abrupt(\"return\");\n            case 16:\n              if (!(accounts.length === 1)) {\n                _context.next = 20;\n                break;\n              }\n              account = accounts[0];\n              this.app.setActiveAccount(account);\n              return _context.abrupt(\"return\", msalToPublic(this.clientId, account));\n            case 20:\n              this.logger.info(\"No accounts were found through MSAL.\");\n              _context.next = 26;\n              break;\n            case 23:\n              _context.prev = 23;\n              _context.t0 = _context[\"catch\"](0);\n              this.logger.info(\"Failed to acquire token through MSAL. \".concat(_context.t0.message));\n            case 26:\n              return _context.abrupt(\"return\");\n            case 27:\n            case \"end\":\n              return _context.stop();\n          }\n        }, _callee, this, [[0, 23]]);\n      }));\n      function handleBrowserResult(_x) {\n        return _handleBrowserResult.apply(this, arguments);\n      }\n      return handleBrowserResult;\n    }()\n    /**\n     * Uses MSAL to handle the redirect.\n     */\n  }, {\n    key: \"handleRedirect\",\n    value: function () {\n      var _handleRedirect = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee2() {\n        return _regeneratorRuntime().wrap(function _callee2$(_context2) {\n          while (1) switch (_context2.prev = _context2.next) {\n            case 0:\n              _context2.t0 = this;\n              _context2.next = 3;\n              return this.app.handleRedirectPromise(redirectHash);\n            case 3:\n              _context2.t1 = _context2.sent;\n              if (_context2.t1) {\n                _context2.next = 6;\n                break;\n              }\n              _context2.t1 = undefined;\n            case 6:\n              _context2.t2 = _context2.t1;\n              return _context2.abrupt(\"return\", _context2.t0.handleBrowserResult.call(_context2.t0, _context2.t2));\n            case 8:\n            case \"end\":\n              return _context2.stop();\n          }\n        }, _callee2, this);\n      }));\n      function handleRedirect() {\n        return _handleRedirect.apply(this, arguments);\n      }\n      return handleRedirect;\n    }()\n    /**\n     * Uses MSAL to trigger a redirect or a popup login.\n     */\n  }, {\n    key: \"login\",\n    value: function () {\n      var _login = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee3() {\n        var scopes,\n          arrayScopes,\n          loginRequest,\n          _args3 = arguments;\n        return _regeneratorRuntime().wrap(function _callee3$(_context3) {\n          while (1) switch (_context3.prev = _context3.next) {\n            case 0:\n              scopes = _args3.length > 0 && _args3[0] !== undefined ? _args3[0] : [];\n              arrayScopes = Array.isArray(scopes) ? scopes : [scopes];\n              loginRequest = {\n                scopes: arrayScopes,\n                loginHint: this.loginHint\n              };\n              _context3.t0 = this.loginStyle;\n              _context3.next = _context3.t0 === \"redirect\" ? 6 : _context3.t0 === \"popup\" ? 9 : 14;\n              break;\n            case 6:\n              _context3.next = 8;\n              return this.app.loginRedirect(loginRequest);\n            case 8:\n              return _context3.abrupt(\"return\");\n            case 9:\n              _context3.t1 = this;\n              _context3.next = 12;\n              return this.app.loginPopup(loginRequest);\n            case 12:\n              _context3.t2 = _context3.sent;\n              return _context3.abrupt(\"return\", _context3.t1.handleBrowserResult.call(_context3.t1, _context3.t2));\n            case 14:\n            case \"end\":\n              return _context3.stop();\n          }\n        }, _callee3, this);\n      }));\n      function login() {\n        return _login.apply(this, arguments);\n      }\n      return login;\n    }()\n    /**\n     * Uses MSAL to retrieve the active account.\n     */\n  }, {\n    key: \"getActiveAccount\",\n    value: function () {\n      var _getActiveAccount = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee4() {\n        var account;\n        return _regeneratorRuntime().wrap(function _callee4$(_context4) {\n          while (1) switch (_context4.prev = _context4.next) {\n            case 0:\n              account = this.app.getActiveAccount();\n              if (account) {\n                _context4.next = 3;\n                break;\n              }\n              return _context4.abrupt(\"return\");\n            case 3:\n              return _context4.abrupt(\"return\", msalToPublic(this.clientId, account));\n            case 4:\n            case \"end\":\n              return _context4.stop();\n          }\n        }, _callee4, this);\n      }));\n      function getActiveAccount() {\n        return _getActiveAccount.apply(this, arguments);\n      }\n      return getActiveAccount;\n    }()\n    /**\n     * Attempts to retrieve a token from cache.\n     */\n  }, {\n    key: \"getTokenSilent\",\n    value: function () {\n      var _getTokenSilent = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee5(scopes, options) {\n        var account, parameters, response;\n        return _regeneratorRuntime().wrap(function _callee5$(_context5) {\n          while (1) switch (_context5.prev = _context5.next) {\n            case 0:\n              _context5.next = 2;\n              return this.getActiveAccount();\n            case 2:\n              account = _context5.sent;\n              if (account) {\n                _context5.next = 5;\n                break;\n              }\n              throw new AuthenticationRequiredError({\n                scopes: scopes,\n                getTokenOptions: options,\n                message: \"Silent authentication failed. We couldn't retrieve an active account from the cache.\"\n              });\n            case 5:\n              parameters = {\n                authority: (options === null || options === void 0 ? void 0 : options.authority) || this.msalConfig.auth.authority,\n                correlationId: options === null || options === void 0 ? void 0 : options.correlationId,\n                claims: options === null || options === void 0 ? void 0 : options.claims,\n                account: publicToMsal(account),\n                forceRefresh: false,\n                scopes: scopes\n              };\n              _context5.prev = 6;\n              this.logger.info(\"Attempting to acquire token silently\");\n              _context5.next = 10;\n              return this.app.acquireTokenSilent(parameters);\n            case 10:\n              response = _context5.sent;\n              return _context5.abrupt(\"return\", this.handleResult(scopes, this.clientId, response));\n            case 14:\n              _context5.prev = 14;\n              _context5.t0 = _context5[\"catch\"](6);\n              throw this.handleError(scopes, _context5.t0, options);\n            case 17:\n            case \"end\":\n              return _context5.stop();\n          }\n        }, _callee5, this, [[6, 14]]);\n      }));\n      function getTokenSilent(_x2, _x3) {\n        return _getTokenSilent.apply(this, arguments);\n      }\n      return getTokenSilent;\n    }()\n    /**\n     * Attempts to retrieve the token in the browser.\n     */\n  }, {\n    key: \"doGetToken\",\n    value: function () {\n      var _doGetToken = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee6(scopes, options) {\n        var account, parameters;\n        return _regeneratorRuntime().wrap(function _callee6$(_context6) {\n          while (1) switch (_context6.prev = _context6.next) {\n            case 0:\n              _context6.next = 2;\n              return this.getActiveAccount();\n            case 2:\n              account = _context6.sent;\n              if (account) {\n                _context6.next = 5;\n                break;\n              }\n              throw new AuthenticationRequiredError({\n                scopes: scopes,\n                getTokenOptions: options,\n                message: \"Silent authentication failed. We couldn't retrieve an active account from the cache.\"\n              });\n            case 5:\n              parameters = {\n                authority: (options === null || options === void 0 ? void 0 : options.authority) || this.msalConfig.auth.authority,\n                correlationId: options === null || options === void 0 ? void 0 : options.correlationId,\n                claims: options === null || options === void 0 ? void 0 : options.claims,\n                account: publicToMsal(account),\n                loginHint: this.loginHint,\n                scopes: scopes\n              };\n              _context6.t0 = this.loginStyle;\n              _context6.next = _context6.t0 === \"redirect\" ? 9 : _context6.t0 === \"popup\" ? 12 : 19;\n              break;\n            case 9:\n              _context6.next = 11;\n              return this.app.acquireTokenRedirect(parameters);\n            case 11:\n              return _context6.abrupt(\"return\", {\n                token: \"\",\n                expiresOnTimestamp: 0\n              });\n            case 12:\n              _context6.t1 = this;\n              _context6.t2 = scopes;\n              _context6.t3 = this.clientId;\n              _context6.next = 17;\n              return this.app.acquireTokenPopup(parameters);\n            case 17:\n              _context6.t4 = _context6.sent;\n              return _context6.abrupt(\"return\", _context6.t1.handleResult.call(_context6.t1, _context6.t2, _context6.t3, _context6.t4));\n            case 19:\n            case \"end\":\n              return _context6.stop();\n          }\n        }, _callee6, this);\n      }));\n      function doGetToken(_x4, _x5) {\n        return _doGetToken.apply(this, arguments);\n      }\n      return doGetToken;\n    }()\n  }]);\n  return MSALAuthCode;\n}(MsalBrowser);","map":{"version":3,"names":["msalBrowser","AuthenticationRequiredError","defaultLoggerCallback","msalToPublic","publicToMsal","MsalBrowser","redirectHash","self","location","hash","MSALAuthCode","_MsalBrowser","_inherits","_super","_createSuper","options","_this","_classCallCheck","call","loginHint","msalConfig","cache","cacheLocation","storeAuthStateInCookie","system","loggerOptions","loggerCallback","logger","app","PublicClientApplication","account","setActiveAccount","_createClass","key","value","_handleBrowserResult","_asyncToGenerator","_regeneratorRuntime","mark","_callee","result","activeAccount","accounts","wrap","_callee$","_context","prev","next","info","abrupt","clientId","getActiveAccount","sent","getAllAccounts","length","logout","onRedirectNavigate","t0","concat","message","stop","handleBrowserResult","_x","apply","arguments","_handleRedirect","_callee2","_callee2$","_context2","handleRedirectPromise","t1","undefined","t2","handleRedirect","_login","_callee3","scopes","arrayScopes","loginRequest","_args3","_callee3$","_context3","Array","isArray","loginStyle","loginRedirect","loginPopup","login","_getActiveAccount","_callee4","_callee4$","_context4","_getTokenSilent","_callee5","parameters","response","_callee5$","_context5","getTokenOptions","authority","auth","correlationId","claims","forceRefresh","acquireTokenSilent","handleResult","handleError","getTokenSilent","_x2","_x3","_doGetToken","_callee6","_callee6$","_context6","acquireTokenRedirect","token","expiresOnTimestamp","t3","acquireTokenPopup","t4","doGetToken","_x4","_x5"],"sources":["../../../../src/msal/browserFlows/msalAuthCode.ts"],"sourcesContent":["// Copyright (c) Microsoft Corporation.\n// Licensed under the MIT license.\n\nimport * as msalBrowser from \"@azure/msal-browser\";\nimport { AccessToken } from \"@azure/core-auth\";\n\nimport { AuthenticationRequiredError } from \"../../errors\";\nimport { defaultLoggerCallback, msalToPublic, publicToMsal } from \"../utils\";\nimport { AuthenticationRecord } from \"../types\";\nimport { CredentialFlowGetTokenOptions } from \"../credentials\";\nimport { MsalBrowser, MsalBrowserFlowOptions } from \"./msalBrowserCommon\";\n\n// We keep a copy of the redirect hash.\nconst redirectHash = self.location.hash;\n\n/**\n * Uses MSAL Browser 2.X for browser authentication,\n * which uses the [Auth Code Flow](https://docs.microsoft.com/en-us/azure/active-directory/develop/v2-oauth2-auth-code-flow).\n * @internal\n */\nexport class MSALAuthCode extends MsalBrowser {\n  protected app: msalBrowser.PublicClientApplication;\n  private loginHint?: string;\n\n  /**\n   * Sets up an MSAL object based on the given parameters.\n   * MSAL with Auth Code allows sending a previously obtained `authenticationRecord` through the optional parameters,\n   * which is set to be the active account.\n   * @param options - Parameters necessary and otherwise used to create the MSAL object.\n   */\n  constructor(options: MsalBrowserFlowOptions) {\n    super(options);\n    this.loginHint = options.loginHint;\n\n    this.msalConfig.cache = {\n      cacheLocation: \"sessionStorage\",\n      storeAuthStateInCookie: true, // Set to true to improve the experience on IE11 and Edge.\n    };\n    this.msalConfig.system = {\n      loggerOptions: {\n        loggerCallback: defaultLoggerCallback(this.logger, \"Browser\"),\n      },\n    };\n\n    // Preparing the MSAL application.\n    this.app = new msalBrowser.PublicClientApplication(\n      this.msalConfig as msalBrowser.Configuration\n    );\n    if (this.account) {\n      this.app.setActiveAccount(publicToMsal(this.account));\n    }\n  }\n\n  /**\n   * Loads the account based on the result of the authentication.\n   * If no result was received, tries to load the account from the cache.\n   * @param result - Result object received from MSAL.\n   */\n  private async handleBrowserResult(\n    result?: msalBrowser.AuthenticationResult\n  ): Promise<AuthenticationRecord | undefined> {\n    try {\n      if (result && result.account) {\n        this.logger.info(`MSAL Browser V2 authentication successful.`);\n        this.app.setActiveAccount(result.account);\n        return msalToPublic(this.clientId, result.account);\n      }\n\n      // If by this point we happen to have an active account, we should stop trying to parse this.\n      const activeAccount = await this.app!.getActiveAccount();\n      if (activeAccount) {\n        return msalToPublic(this.clientId, activeAccount);\n      }\n\n      // If we don't have an active account, we try to activate it from all the already loaded accounts.\n      const accounts = this.app.getAllAccounts();\n      if (accounts.length > 1) {\n        // If there's more than one account in memory, we force the user to authenticate again.\n        // At this point we can't identify which account should this credential work with,\n        // since at this point the user won't have provided enough information.\n        // We log a message in case that helps.\n        this.logger.info(\n          `More than one account was found authenticated for this Client ID and Tenant ID.\nHowever, no \"authenticationRecord\" has been provided for this credential,\ntherefore we're unable to pick between these accounts.\nA new login attempt will be requested, to ensure the correct account is picked.\nTo work with multiple accounts for the same Client ID and Tenant ID, please provide an \"authenticationRecord\" when initializing \"InteractiveBrowserCredential\".`\n        );\n        // To safely trigger a new login, we're also ensuring the local cache is cleared up for this MSAL object.\n        // However, we want to avoid kicking the user out of their authentication on the Azure side.\n        // We do this by calling to logout while specifying a `onRedirectNavigate` that returns false.\n        await this.app.logout({\n          onRedirectNavigate: () => false,\n        });\n        return;\n      }\n\n      // If there's only one account for this MSAL object, we can safely activate it.\n      if (accounts.length === 1) {\n        const account = accounts[0];\n        this.app.setActiveAccount(account);\n        return msalToPublic(this.clientId, account);\n      }\n\n      this.logger.info(`No accounts were found through MSAL.`);\n    } catch (e: any) {\n      this.logger.info(`Failed to acquire token through MSAL. ${e.message}`);\n    }\n    return;\n  }\n\n  /**\n   * Uses MSAL to handle the redirect.\n   */\n  public async handleRedirect(): Promise<AuthenticationRecord | undefined> {\n    return this.handleBrowserResult(\n      (await this.app.handleRedirectPromise(redirectHash)) || undefined\n    );\n  }\n\n  /**\n   * Uses MSAL to trigger a redirect or a popup login.\n   */\n  public async login(scopes: string | string[] = []): Promise<AuthenticationRecord | undefined> {\n    const arrayScopes = Array.isArray(scopes) ? scopes : [scopes];\n    const loginRequest: msalBrowser.RedirectRequest = {\n      scopes: arrayScopes,\n      loginHint: this.loginHint,\n    };\n    switch (this.loginStyle) {\n      case \"redirect\": {\n        await this.app.loginRedirect(loginRequest);\n        return;\n      }\n      case \"popup\":\n        return this.handleBrowserResult(await this.app.loginPopup(loginRequest));\n    }\n  }\n\n  /**\n   * Uses MSAL to retrieve the active account.\n   */\n  public async getActiveAccount(): Promise<AuthenticationRecord | undefined> {\n    const account = this.app.getActiveAccount();\n    if (!account) {\n      return;\n    }\n    return msalToPublic(this.clientId, account);\n  }\n\n  /**\n   * Attempts to retrieve a token from cache.\n   */\n  public async getTokenSilent(\n    scopes: string[],\n    options?: CredentialFlowGetTokenOptions\n  ): Promise<AccessToken> {\n    const account = await this.getActiveAccount();\n    if (!account) {\n      throw new AuthenticationRequiredError({\n        scopes,\n        getTokenOptions: options,\n        message:\n          \"Silent authentication failed. We couldn't retrieve an active account from the cache.\",\n      });\n    }\n\n    const parameters: msalBrowser.SilentRequest = {\n      authority: options?.authority || this.msalConfig.auth.authority!,\n      correlationId: options?.correlationId,\n      claims: options?.claims,\n      account: publicToMsal(account),\n      forceRefresh: false,\n      scopes,\n    };\n\n    try {\n      this.logger.info(\"Attempting to acquire token silently\");\n      const response = await this.app.acquireTokenSilent(parameters);\n      return this.handleResult(scopes, this.clientId, response);\n    } catch (err: any) {\n      throw this.handleError(scopes, err, options);\n    }\n  }\n\n  /**\n   * Attempts to retrieve the token in the browser.\n   */\n  protected async doGetToken(\n    scopes: string[],\n    options?: CredentialFlowGetTokenOptions\n  ): Promise<AccessToken> {\n    const account = await this.getActiveAccount();\n    if (!account) {\n      throw new AuthenticationRequiredError({\n        scopes,\n        getTokenOptions: options,\n        message:\n          \"Silent authentication failed. We couldn't retrieve an active account from the cache.\",\n      });\n    }\n\n    const parameters: msalBrowser.RedirectRequest = {\n      authority: options?.authority || this.msalConfig.auth.authority!,\n      correlationId: options?.correlationId,\n      claims: options?.claims,\n      account: publicToMsal(account),\n      loginHint: this.loginHint,\n      scopes,\n    };\n\n    switch (this.loginStyle) {\n      case \"redirect\":\n        // This will go out of the page.\n        // Once the InteractiveBrowserCredential is initialized again,\n        // we'll load the MSAL account in the constructor.\n        await this.app.acquireTokenRedirect(parameters);\n        return { token: \"\", expiresOnTimestamp: 0 };\n      case \"popup\":\n        return this.handleResult(\n          scopes,\n          this.clientId,\n          await this.app.acquireTokenPopup(parameters)\n        );\n    }\n  }\n}\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}