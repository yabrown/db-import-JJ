{"ast":null,"code":"\"use strict\";\n\nvar _classCallCheck = require(\"/Users/aribraun/Desktop/db-import/node_modules/@babel/runtime/helpers/classCallCheck.js\").default;\nvar _createClass = require(\"/Users/aribraun/Desktop/db-import/node_modules/@babel/runtime/helpers/createClass.js\").default;\nvar _inherits = require(\"/Users/aribraun/Desktop/db-import/node_modules/@babel/runtime/helpers/inherits.js\").default;\nvar _createSuper = require(\"/Users/aribraun/Desktop/db-import/node_modules/@babel/runtime/helpers/createSuper.js\").default;\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.Parser = void 0;\nvar _events = require(\"events\");\nvar _streamParser = _interopRequireDefault(require(\"./stream-parser\"));\nvar _stream = require(\"stream\");\nfunction _interopRequireDefault(obj) {\n  return obj && obj.__esModule ? obj : {\n    default: obj\n  };\n}\nvar Parser = /*#__PURE__*/function (_events$EventEmitter) {\n  _inherits(Parser, _events$EventEmitter);\n  var _super = _createSuper(Parser);\n  function Parser(message, debug, handler, options) {\n    var _this;\n    _classCallCheck(this, Parser);\n    _this = _super.call(this);\n    _this.debug = void 0;\n    _this.options = void 0;\n    _this.parser = void 0;\n    _this.debug = debug;\n    _this.options = options;\n    _this.parser = _stream.Readable.from(_streamParser.default.parseTokens(message, _this.debug, _this.options));\n    _this.parser.on('data', function (token) {\n      handler[token.handlerName](token);\n    });\n    _this.parser.on('drain', function () {\n      _this.emit('drain');\n    });\n    _this.parser.on('end', function () {\n      _this.emit('end');\n    });\n    return _this;\n  }\n  _createClass(Parser, [{\n    key: \"pause\",\n    value: function pause() {\n      return this.parser.pause();\n    }\n  }, {\n    key: \"resume\",\n    value: function resume() {\n      return this.parser.resume();\n    }\n  }]);\n  return Parser;\n}(_events.EventEmitter);\nexports.Parser = Parser;","map":{"version":3,"names":["_events","require","_streamParser","_interopRequireDefault","_stream","Parser","_events$EventEmitter","_inherits","_super","_createSuper","message","debug","handler","options","_this","_classCallCheck","call","parser","Readable","from","default","parseTokens","on","token","handlerName","emit","_createClass","key","value","pause","resume","EventEmitter"],"sources":["../../src/token/token-stream-parser.ts"],"sourcesContent":["import { EventEmitter } from 'events';\nimport StreamParser, { ParserOptions } from './stream-parser';\nimport Debug from '../debug';\nimport { Token } from './token';\nimport { Readable } from 'stream';\nimport Message from '../message';\nimport { TokenHandler } from './handler';\n\nexport class Parser extends EventEmitter {\n  debug: Debug;\n  options: ParserOptions;\n  parser: Readable;\n\n  constructor(message: Message, debug: Debug, handler: TokenHandler, options: ParserOptions) {\n    super();\n\n    this.debug = debug;\n    this.options = options;\n\n    this.parser = Readable.from(StreamParser.parseTokens(message, this.debug, this.options));\n    this.parser.on('data', (token: Token) => {\n      handler[token.handlerName as keyof TokenHandler](token as any);\n    });\n\n    this.parser.on('drain', () => {\n      this.emit('drain');\n    });\n\n    this.parser.on('end', () => {\n      this.emit('end');\n    });\n  }\n\n  declare on: (\n    ((event: 'end', listener: () => void) => this) &\n    ((event: string | symbol, listener: (...args: any[]) => void) => this)\n  );\n\n  pause() {\n    return this.parser.pause();\n  }\n\n  resume() {\n    return this.parser.resume();\n  }\n}\n"],"mappings":";;;;;;;;;;AAAA,IAAAA,OAAA,GAAAC,OAAA;AACA,IAAAC,aAAA,GAAAC,sBAAA,CAAAF,OAAA;AAGA,IAAAG,OAAA,GAAAH,OAAA;;;;;;IAIaI,MAAN,0BAAAC,oBAAA;EAAAC,SAAA,CAAAF,MAAA,EAAAC,oBAAA;EAAA,IAAAE,MAAA,GAAAC,YAAA,CAAAJ,MAAA;EAKL,SAAAA,OAAYK,OAAD,EAAmBC,KAAnB,EAAiCC,OAAjC,EAAwDC,OAAxD,EAAgF;IAAA,IAAAC,KAAA;IAAAC,eAAA,OAAAV,MAAA;IACzFS,KAAA,GAAAN,MAAA,CAAAQ,IAAA;IADyFF,KAAA,CAJ3FH,KAI2F;IAAAG,KAAA,CAH3FD,OAG2F;IAAAC,KAAA,CAF3FG,MAE2F;IAGzFH,KAAA,CAAKH,KAAL,GAAaA,KAAb;IACAG,KAAA,CAAKD,OAAL,GAAeA,OAAf;IAEAC,KAAA,CAAKG,MAAL,GAAcb,OAAA,CAAAc,QAAA,CAASC,IAAT,CAAcjB,aAAA,CAAAkB,OAAA,CAAaC,WAAb,CAAyBX,OAAzB,EAAkCI,KAAA,CAAKH,KAAvC,EAA8CG,KAAA,CAAKD,OAAnD,CAAd,CAAd;IACAC,KAAA,CAAKG,MAAL,CAAYK,EAAZ,CAAe,MAAf,EAAwB,UAAAC,KAAD,EAAkB;MACvCX,OAAO,CAACW,KAAK,CAACC,WAAP,CAAP,CAAiDD,KAAjD;IACD,CAFD;IAIAT,KAAA,CAAKG,MAAL,CAAYK,EAAZ,CAAe,OAAf,EAAwB,YAAM;MAC5BR,KAAA,CAAKW,IAAL,CAAU,OAAV;IACD,CAFD;IAIAX,KAAA,CAAKG,MAAL,CAAYK,EAAZ,CAAe,KAAf,EAAsB,YAAM;MAC1BR,KAAA,CAAKW,IAAL,CAAU,KAAV;IACD,CAFD;IAAA,OAAAX,KAAA;EAGD;EAAAY,YAAA,CAAArB,MAAA;IAAAsB,GAAA;IAAAC,KAAA,EAOD,SAAAC,MAAA,EAAQ;MACN,OAAO,KAAKZ,MAAL,CAAYY,KAAZ,EAAP;IACD;EAAA;IAAAF,GAAA;IAAAC,KAAA,EAED,SAAAE,OAAA,EAAS;MACP,OAAO,KAAKb,MAAL,CAAYa,MAAZ,EAAP;IACD;EAAA;EAAA,OAAAzB,MAAA;AAAA,EApCyBL,OAAA,CAAA+B,YAArB"},"metadata":{},"sourceType":"script"}