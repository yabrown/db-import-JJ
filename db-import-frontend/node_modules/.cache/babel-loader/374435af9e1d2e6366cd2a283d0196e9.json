{"ast":null,"code":"'use strict';\n\n// tar -x\nvar hlo = require('./high-level-opt.js');\nvar Unpack = require('./unpack.js');\nvar fs = require('fs');\nvar fsm = require('fs-minipass');\nvar path = require('path');\nvar stripSlash = require('./strip-trailing-slashes.js');\nmodule.exports = function (opt_, files, cb) {\n  if (typeof opt_ === 'function') {\n    cb = opt_, files = null, opt_ = {};\n  } else if (Array.isArray(opt_)) {\n    files = opt_, opt_ = {};\n  }\n  if (typeof files === 'function') {\n    cb = files, files = null;\n  }\n  if (!files) {\n    files = [];\n  } else {\n    files = Array.from(files);\n  }\n  var opt = hlo(opt_);\n  if (opt.sync && typeof cb === 'function') {\n    throw new TypeError('callback not supported for sync tar functions');\n  }\n  if (!opt.file && typeof cb === 'function') {\n    throw new TypeError('callback only supported with file option');\n  }\n  if (files.length) {\n    filesFilter(opt, files);\n  }\n  return opt.file && opt.sync ? extractFileSync(opt) : opt.file ? extractFile(opt, cb) : opt.sync ? extractSync(opt) : extract(opt);\n};\n\n// construct a filter that limits the file entries listed\n// include child entries if a dir is included\nvar filesFilter = function filesFilter(opt, files) {\n  var map = new Map(files.map(function (f) {\n    return [stripSlash(f), true];\n  }));\n  var filter = opt.filter;\n  var mapHas = function mapHas(file, r) {\n    var root = r || path.parse(file).root || '.';\n    var ret = file === root ? false : map.has(file) ? map.get(file) : mapHas(path.dirname(file), root);\n    map.set(file, ret);\n    return ret;\n  };\n  opt.filter = filter ? function (file, entry) {\n    return filter(file, entry) && mapHas(stripSlash(file));\n  } : function (file) {\n    return mapHas(stripSlash(file));\n  };\n};\nvar extractFileSync = function extractFileSync(opt) {\n  var u = new Unpack.Sync(opt);\n  var file = opt.file;\n  var stat = fs.statSync(file);\n  // This trades a zero-byte read() syscall for a stat\n  // However, it will usually result in less memory allocation\n  var readSize = opt.maxReadSize || 16 * 1024 * 1024;\n  var stream = new fsm.ReadStreamSync(file, {\n    readSize: readSize,\n    size: stat.size\n  });\n  stream.pipe(u);\n};\nvar extractFile = function extractFile(opt, cb) {\n  var u = new Unpack(opt);\n  var readSize = opt.maxReadSize || 16 * 1024 * 1024;\n  var file = opt.file;\n  var p = new Promise(function (resolve, reject) {\n    u.on('error', reject);\n    u.on('close', resolve);\n\n    // This trades a zero-byte read() syscall for a stat\n    // However, it will usually result in less memory allocation\n    fs.stat(file, function (er, stat) {\n      if (er) {\n        reject(er);\n      } else {\n        var stream = new fsm.ReadStream(file, {\n          readSize: readSize,\n          size: stat.size\n        });\n        stream.on('error', reject);\n        stream.pipe(u);\n      }\n    });\n  });\n  return cb ? p.then(cb, cb) : p;\n};\nvar extractSync = function extractSync(opt) {\n  return new Unpack.Sync(opt);\n};\nvar extract = function extract(opt) {\n  return new Unpack(opt);\n};","map":{"version":3,"names":["hlo","require","Unpack","fs","fsm","path","stripSlash","module","exports","opt_","files","cb","Array","isArray","from","opt","sync","TypeError","file","length","filesFilter","extractFileSync","extractFile","extractSync","extract","map","Map","f","filter","mapHas","r","root","parse","ret","has","get","dirname","set","entry","u","Sync","stat","statSync","readSize","maxReadSize","stream","ReadStreamSync","size","pipe","p","Promise","resolve","reject","on","er","ReadStream","then"],"sources":["/Users/aribraun/Desktop/db-import/node_modules/tar/lib/extract.js"],"sourcesContent":["'use strict'\n\n// tar -x\nconst hlo = require('./high-level-opt.js')\nconst Unpack = require('./unpack.js')\nconst fs = require('fs')\nconst fsm = require('fs-minipass')\nconst path = require('path')\nconst stripSlash = require('./strip-trailing-slashes.js')\n\nmodule.exports = (opt_, files, cb) => {\n  if (typeof opt_ === 'function') {\n    cb = opt_, files = null, opt_ = {}\n  } else if (Array.isArray(opt_)) {\n    files = opt_, opt_ = {}\n  }\n\n  if (typeof files === 'function') {\n    cb = files, files = null\n  }\n\n  if (!files) {\n    files = []\n  } else {\n    files = Array.from(files)\n  }\n\n  const opt = hlo(opt_)\n\n  if (opt.sync && typeof cb === 'function') {\n    throw new TypeError('callback not supported for sync tar functions')\n  }\n\n  if (!opt.file && typeof cb === 'function') {\n    throw new TypeError('callback only supported with file option')\n  }\n\n  if (files.length) {\n    filesFilter(opt, files)\n  }\n\n  return opt.file && opt.sync ? extractFileSync(opt)\n    : opt.file ? extractFile(opt, cb)\n    : opt.sync ? extractSync(opt)\n    : extract(opt)\n}\n\n// construct a filter that limits the file entries listed\n// include child entries if a dir is included\nconst filesFilter = (opt, files) => {\n  const map = new Map(files.map(f => [stripSlash(f), true]))\n  const filter = opt.filter\n\n  const mapHas = (file, r) => {\n    const root = r || path.parse(file).root || '.'\n    const ret = file === root ? false\n      : map.has(file) ? map.get(file)\n      : mapHas(path.dirname(file), root)\n\n    map.set(file, ret)\n    return ret\n  }\n\n  opt.filter = filter\n    ? (file, entry) => filter(file, entry) && mapHas(stripSlash(file))\n    : file => mapHas(stripSlash(file))\n}\n\nconst extractFileSync = opt => {\n  const u = new Unpack.Sync(opt)\n\n  const file = opt.file\n  const stat = fs.statSync(file)\n  // This trades a zero-byte read() syscall for a stat\n  // However, it will usually result in less memory allocation\n  const readSize = opt.maxReadSize || 16 * 1024 * 1024\n  const stream = new fsm.ReadStreamSync(file, {\n    readSize: readSize,\n    size: stat.size,\n  })\n  stream.pipe(u)\n}\n\nconst extractFile = (opt, cb) => {\n  const u = new Unpack(opt)\n  const readSize = opt.maxReadSize || 16 * 1024 * 1024\n\n  const file = opt.file\n  const p = new Promise((resolve, reject) => {\n    u.on('error', reject)\n    u.on('close', resolve)\n\n    // This trades a zero-byte read() syscall for a stat\n    // However, it will usually result in less memory allocation\n    fs.stat(file, (er, stat) => {\n      if (er) {\n        reject(er)\n      } else {\n        const stream = new fsm.ReadStream(file, {\n          readSize: readSize,\n          size: stat.size,\n        })\n        stream.on('error', reject)\n        stream.pipe(u)\n      }\n    })\n  })\n  return cb ? p.then(cb, cb) : p\n}\n\nconst extractSync = opt => new Unpack.Sync(opt)\n\nconst extract = opt => new Unpack(opt)\n"],"mappings":"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"},"metadata":{},"sourceType":"script"}