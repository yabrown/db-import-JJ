{"ast":null,"code":"'use strict';\n\n// tar -u\nvar hlo = require('./high-level-opt.js');\nvar r = require('./replace.js');\n// just call tar.r with the filter and mtimeCache\n\nmodule.exports = function (opt_, files, cb) {\n  var opt = hlo(opt_);\n  if (!opt.file) {\n    throw new TypeError('file is required');\n  }\n  if (opt.gzip) {\n    throw new TypeError('cannot append to compressed archives');\n  }\n  if (!files || !Array.isArray(files) || !files.length) {\n    throw new TypeError('no files or directories specified');\n  }\n  files = Array.from(files);\n  mtimeFilter(opt);\n  return r(opt, files, cb);\n};\nvar mtimeFilter = function mtimeFilter(opt) {\n  var filter = opt.filter;\n  if (!opt.mtimeCache) {\n    opt.mtimeCache = new Map();\n  }\n  opt.filter = filter ? function (path, stat) {\n    return filter(path, stat) && !(opt.mtimeCache.get(path) > stat.mtime);\n  } : function (path, stat) {\n    return !(opt.mtimeCache.get(path) > stat.mtime);\n  };\n};","map":{"version":3,"names":["hlo","require","r","module","exports","opt_","files","cb","opt","file","TypeError","gzip","Array","isArray","length","from","mtimeFilter","filter","mtimeCache","Map","path","stat","get","mtime"],"sources":["/Users/aribraun/Desktop/db-import/node_modules/tar/lib/update.js"],"sourcesContent":["'use strict'\n\n// tar -u\n\nconst hlo = require('./high-level-opt.js')\nconst r = require('./replace.js')\n// just call tar.r with the filter and mtimeCache\n\nmodule.exports = (opt_, files, cb) => {\n  const opt = hlo(opt_)\n\n  if (!opt.file) {\n    throw new TypeError('file is required')\n  }\n\n  if (opt.gzip) {\n    throw new TypeError('cannot append to compressed archives')\n  }\n\n  if (!files || !Array.isArray(files) || !files.length) {\n    throw new TypeError('no files or directories specified')\n  }\n\n  files = Array.from(files)\n\n  mtimeFilter(opt)\n  return r(opt, files, cb)\n}\n\nconst mtimeFilter = opt => {\n  const filter = opt.filter\n\n  if (!opt.mtimeCache) {\n    opt.mtimeCache = new Map()\n  }\n\n  opt.filter = filter ? (path, stat) =>\n    filter(path, stat) && !(opt.mtimeCache.get(path) > stat.mtime)\n    : (path, stat) => !(opt.mtimeCache.get(path) > stat.mtime)\n}\n"],"mappings":"AAAA,YAAY;;AAEZ;AAEA,IAAMA,GAAG,GAAGC,OAAO,CAAC,qBAAqB,CAAC;AAC1C,IAAMC,CAAC,GAAGD,OAAO,CAAC,cAAc,CAAC;AACjC;;AAEAE,MAAM,CAACC,OAAO,GAAG,UAACC,IAAI,EAAEC,KAAK,EAAEC,EAAE,EAAK;EACpC,IAAMC,GAAG,GAAGR,GAAG,CAACK,IAAI,CAAC;EAErB,IAAI,CAACG,GAAG,CAACC,IAAI,EAAE;IACb,MAAM,IAAIC,SAAS,CAAC,kBAAkB,CAAC;EACzC;EAEA,IAAIF,GAAG,CAACG,IAAI,EAAE;IACZ,MAAM,IAAID,SAAS,CAAC,sCAAsC,CAAC;EAC7D;EAEA,IAAI,CAACJ,KAAK,IAAI,CAACM,KAAK,CAACC,OAAO,CAACP,KAAK,CAAC,IAAI,CAACA,KAAK,CAACQ,MAAM,EAAE;IACpD,MAAM,IAAIJ,SAAS,CAAC,mCAAmC,CAAC;EAC1D;EAEAJ,KAAK,GAAGM,KAAK,CAACG,IAAI,CAACT,KAAK,CAAC;EAEzBU,WAAW,CAACR,GAAG,CAAC;EAChB,OAAON,CAAC,CAACM,GAAG,EAAEF,KAAK,EAAEC,EAAE,CAAC;AAC1B,CAAC;AAED,IAAMS,WAAW,GAAG,SAAdA,WAAWA,CAAGR,GAAG,EAAI;EACzB,IAAMS,MAAM,GAAGT,GAAG,CAACS,MAAM;EAEzB,IAAI,CAACT,GAAG,CAACU,UAAU,EAAE;IACnBV,GAAG,CAACU,UAAU,GAAG,IAAIC,GAAG,CAAC,CAAC;EAC5B;EAEAX,GAAG,CAACS,MAAM,GAAGA,MAAM,GAAG,UAACG,IAAI,EAAEC,IAAI;IAAA,OAC/BJ,MAAM,CAACG,IAAI,EAAEC,IAAI,CAAC,IAAI,EAAEb,GAAG,CAACU,UAAU,CAACI,GAAG,CAACF,IAAI,CAAC,GAAGC,IAAI,CAACE,KAAK,CAAC;EAAA,IAC5D,UAACH,IAAI,EAAEC,IAAI;IAAA,OAAK,EAAEb,GAAG,CAACU,UAAU,CAACI,GAAG,CAACF,IAAI,CAAC,GAAGC,IAAI,CAACE,KAAK,CAAC;EAAA;AAC9D,CAAC"},"metadata":{},"sourceType":"script"}