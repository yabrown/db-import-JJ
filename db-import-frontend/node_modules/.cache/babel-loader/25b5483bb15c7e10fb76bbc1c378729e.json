{"ast":null,"code":"'use strict';\n\nvar u = require('universalify').fromCallback;\nvar path = require('path');\nvar fs = require('graceful-fs');\nvar mkdir = require('../mkdirs');\nvar pathExists = require('../path-exists').pathExists;\nfunction createLink(srcpath, dstpath, callback) {\n  function makeLink(srcpath, dstpath) {\n    fs.link(srcpath, dstpath, function (err) {\n      if (err) return callback(err);\n      callback(null);\n    });\n  }\n  pathExists(dstpath, function (err, destinationExists) {\n    if (err) return callback(err);\n    if (destinationExists) return callback(null);\n    fs.lstat(srcpath, function (err) {\n      if (err) {\n        err.message = err.message.replace('lstat', 'ensureLink');\n        return callback(err);\n      }\n      var dir = path.dirname(dstpath);\n      pathExists(dir, function (err, dirExists) {\n        if (err) return callback(err);\n        if (dirExists) return makeLink(srcpath, dstpath);\n        mkdir.mkdirs(dir, function (err) {\n          if (err) return callback(err);\n          makeLink(srcpath, dstpath);\n        });\n      });\n    });\n  });\n}\nfunction createLinkSync(srcpath, dstpath) {\n  var destinationExists = fs.existsSync(dstpath);\n  if (destinationExists) return undefined;\n  try {\n    fs.lstatSync(srcpath);\n  } catch (err) {\n    err.message = err.message.replace('lstat', 'ensureLink');\n    throw err;\n  }\n  var dir = path.dirname(dstpath);\n  var dirExists = fs.existsSync(dir);\n  if (dirExists) return fs.linkSync(srcpath, dstpath);\n  mkdir.mkdirsSync(dir);\n  return fs.linkSync(srcpath, dstpath);\n}\nmodule.exports = {\n  createLink: u(createLink),\n  createLinkSync: createLinkSync\n};","map":{"version":3,"names":["u","require","fromCallback","path","fs","mkdir","pathExists","createLink","srcpath","dstpath","callback","makeLink","link","err","destinationExists","lstat","message","replace","dir","dirname","dirExists","mkdirs","createLinkSync","existsSync","undefined","lstatSync","linkSync","mkdirsSync","module","exports"],"sources":["/Users/aribraun/Desktop/db-import/node_modules/mock-aws-s3/node_modules/fs-extra/lib/ensure/link.js"],"sourcesContent":["'use strict'\n\nconst u = require('universalify').fromCallback\nconst path = require('path')\nconst fs = require('graceful-fs')\nconst mkdir = require('../mkdirs')\nconst pathExists = require('../path-exists').pathExists\n\nfunction createLink (srcpath, dstpath, callback) {\n  function makeLink (srcpath, dstpath) {\n    fs.link(srcpath, dstpath, err => {\n      if (err) return callback(err)\n      callback(null)\n    })\n  }\n\n  pathExists(dstpath, (err, destinationExists) => {\n    if (err) return callback(err)\n    if (destinationExists) return callback(null)\n    fs.lstat(srcpath, (err) => {\n      if (err) {\n        err.message = err.message.replace('lstat', 'ensureLink')\n        return callback(err)\n      }\n\n      const dir = path.dirname(dstpath)\n      pathExists(dir, (err, dirExists) => {\n        if (err) return callback(err)\n        if (dirExists) return makeLink(srcpath, dstpath)\n        mkdir.mkdirs(dir, err => {\n          if (err) return callback(err)\n          makeLink(srcpath, dstpath)\n        })\n      })\n    })\n  })\n}\n\nfunction createLinkSync (srcpath, dstpath) {\n  const destinationExists = fs.existsSync(dstpath)\n  if (destinationExists) return undefined\n\n  try {\n    fs.lstatSync(srcpath)\n  } catch (err) {\n    err.message = err.message.replace('lstat', 'ensureLink')\n    throw err\n  }\n\n  const dir = path.dirname(dstpath)\n  const dirExists = fs.existsSync(dir)\n  if (dirExists) return fs.linkSync(srcpath, dstpath)\n  mkdir.mkdirsSync(dir)\n\n  return fs.linkSync(srcpath, dstpath)\n}\n\nmodule.exports = {\n  createLink: u(createLink),\n  createLinkSync\n}\n"],"mappings":"AAAA,YAAY;;AAEZ,IAAMA,CAAC,GAAGC,OAAO,CAAC,cAAc,CAAC,CAACC,YAAY;AAC9C,IAAMC,IAAI,GAAGF,OAAO,CAAC,MAAM,CAAC;AAC5B,IAAMG,EAAE,GAAGH,OAAO,CAAC,aAAa,CAAC;AACjC,IAAMI,KAAK,GAAGJ,OAAO,CAAC,WAAW,CAAC;AAClC,IAAMK,UAAU,GAAGL,OAAO,CAAC,gBAAgB,CAAC,CAACK,UAAU;AAEvD,SAASC,UAAUA,CAAEC,OAAO,EAAEC,OAAO,EAAEC,QAAQ,EAAE;EAC/C,SAASC,QAAQA,CAAEH,OAAO,EAAEC,OAAO,EAAE;IACnCL,EAAE,CAACQ,IAAI,CAACJ,OAAO,EAAEC,OAAO,EAAE,UAAAI,GAAG,EAAI;MAC/B,IAAIA,GAAG,EAAE,OAAOH,QAAQ,CAACG,GAAG,CAAC;MAC7BH,QAAQ,CAAC,IAAI,CAAC;IAChB,CAAC,CAAC;EACJ;EAEAJ,UAAU,CAACG,OAAO,EAAE,UAACI,GAAG,EAAEC,iBAAiB,EAAK;IAC9C,IAAID,GAAG,EAAE,OAAOH,QAAQ,CAACG,GAAG,CAAC;IAC7B,IAAIC,iBAAiB,EAAE,OAAOJ,QAAQ,CAAC,IAAI,CAAC;IAC5CN,EAAE,CAACW,KAAK,CAACP,OAAO,EAAE,UAACK,GAAG,EAAK;MACzB,IAAIA,GAAG,EAAE;QACPA,GAAG,CAACG,OAAO,GAAGH,GAAG,CAACG,OAAO,CAACC,OAAO,CAAC,OAAO,EAAE,YAAY,CAAC;QACxD,OAAOP,QAAQ,CAACG,GAAG,CAAC;MACtB;MAEA,IAAMK,GAAG,GAAGf,IAAI,CAACgB,OAAO,CAACV,OAAO,CAAC;MACjCH,UAAU,CAACY,GAAG,EAAE,UAACL,GAAG,EAAEO,SAAS,EAAK;QAClC,IAAIP,GAAG,EAAE,OAAOH,QAAQ,CAACG,GAAG,CAAC;QAC7B,IAAIO,SAAS,EAAE,OAAOT,QAAQ,CAACH,OAAO,EAAEC,OAAO,CAAC;QAChDJ,KAAK,CAACgB,MAAM,CAACH,GAAG,EAAE,UAAAL,GAAG,EAAI;UACvB,IAAIA,GAAG,EAAE,OAAOH,QAAQ,CAACG,GAAG,CAAC;UAC7BF,QAAQ,CAACH,OAAO,EAAEC,OAAO,CAAC;QAC5B,CAAC,CAAC;MACJ,CAAC,CAAC;IACJ,CAAC,CAAC;EACJ,CAAC,CAAC;AACJ;AAEA,SAASa,cAAcA,CAAEd,OAAO,EAAEC,OAAO,EAAE;EACzC,IAAMK,iBAAiB,GAAGV,EAAE,CAACmB,UAAU,CAACd,OAAO,CAAC;EAChD,IAAIK,iBAAiB,EAAE,OAAOU,SAAS;EAEvC,IAAI;IACFpB,EAAE,CAACqB,SAAS,CAACjB,OAAO,CAAC;EACvB,CAAC,CAAC,OAAOK,GAAG,EAAE;IACZA,GAAG,CAACG,OAAO,GAAGH,GAAG,CAACG,OAAO,CAACC,OAAO,CAAC,OAAO,EAAE,YAAY,CAAC;IACxD,MAAMJ,GAAG;EACX;EAEA,IAAMK,GAAG,GAAGf,IAAI,CAACgB,OAAO,CAACV,OAAO,CAAC;EACjC,IAAMW,SAAS,GAAGhB,EAAE,CAACmB,UAAU,CAACL,GAAG,CAAC;EACpC,IAAIE,SAAS,EAAE,OAAOhB,EAAE,CAACsB,QAAQ,CAAClB,OAAO,EAAEC,OAAO,CAAC;EACnDJ,KAAK,CAACsB,UAAU,CAACT,GAAG,CAAC;EAErB,OAAOd,EAAE,CAACsB,QAAQ,CAAClB,OAAO,EAAEC,OAAO,CAAC;AACtC;AAEAmB,MAAM,CAACC,OAAO,GAAG;EACftB,UAAU,EAAEP,CAAC,CAACO,UAAU,CAAC;EACzBe,cAAc,EAAdA;AACF,CAAC"},"metadata":{},"sourceType":"script"}